(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],u=0,h=[];u<s.length;u++)o=s[u],i[o]&&h.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0006":function(t,e,a){},"0017":function(t,e,a){},"029a":function(t,e,a){"use strict";var n=a("9023"),i=a.n(n);i.a},"04c2":function(t,e,a){"use strict";var n=a("935f"),i=a.n(n);i.a},"06e9":function(t,e,a){"use strict";var n=a("2c97"),i=a.n(n);i.a},"0894":function(t,e,a){},"0a7a":function(t,e,a){},"0b41":function(t,e,a){"use strict";var n=a("6535"),i=a.n(n);i.a},"0c02":function(t,e,a){"use strict";var n=a("79ff"),i=a.n(n);i.a},"0e49":function(t,e,a){},"103b":function(t,e,a){},1845:function(t,e,a){"use strict";var n=a("2953"),i=a.n(n);i.a},"19f9":function(t,e,a){"use strict";var n=a("9ec3"),i=a.n(n);i.a},"1a4d":function(t,e,a){"use strict";var n=a("4e87"),i=a.n(n);i.a},"1d5a":function(t,e,a){},"20d0":function(t,e,a){},"23a7":function(t,e,a){},2464:function(t,e,a){},"24b6":function(t,e,a){},2686:function(t,e,a){"use strict";var n=a("79df"),i=a.n(n);i.a},2766:function(t,e,a){},2953:function(t,e,a){},"2c97":function(t,e,a){},"338d":function(t,e,a){"use strict";var n=a("0a7a"),i=a.n(n);i.a},3494:function(t,e,a){"use strict";var n=a("4feb"),i=a.n(n);i.a},"358d":function(t,e,a){},3769:function(t,e,a){"use strict";var n=a("c32b"),i=a.n(n);i.a},"39d1":function(t,e,a){"use strict";var n=a("c8de"),i=a.n(n);i.a},"3aec":function(t,e,a){"use strict";var n=a("43f9"),i=a.n(n);i.a},"3bf0":function(t,e,a){"use strict";var n=a("6ff7"),i=a.n(n);i.a},"3e2e":function(t,e,a){"use strict";var n=a("e634"),i=a.n(n);i.a},"3e59":function(t,e,a){"use strict";var n=a("8663"),i=a.n(n);i.a},"43f9":function(t,e,a){},"457f":function(t,e,a){"use strict";var n=a("0e49"),i=a.n(n);i.a},4593:function(t,e,a){},"45b2":function(t,e,a){},"4e87":function(t,e,a){},"4feb":function(t,e,a){},5010:function(t,e,a){},"52ef":function(t,e,a){},"55a2":function(t,e,a){},"55bb":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-menu",{key:t.componentKey,staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#676767","text-color":"#fff","default-active":t.activeIndex,"active-text-color":"#ffd04b"}},[a("el-menu-item",{staticClass:"labelIcon",attrs:{id:"title",index:"title"},on:{click:function(e){t.navbarSelectPanel("title")}}},[t._v("\n        "+t._s(t.appName)+"\n      ")]),t._l(t.operationArray,function(e){return a("el-tooltip",{key:e,staticClass:"labelIcon",attrs:{content:e,effect:"light"}},[a("el-menu-item",{attrs:{index:e},on:{click:function(a){t.navbarSelectPanel(e)}}},[a("i",{staticClass:"icon iconfont",class:t.iconClass(e)})])],1)})],2),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-container"},[t.loading?t._e():a("div",{staticClass:"content"},[a("div",{staticClass:"left-panel"},[a("div",{staticClass:"bottom-panel"},[a("div",{staticClass:"layout"},[a("Layout")],1),a("div",{staticClass:"element"},[a("Element")],1),a("div",{staticClass:"coordinate_system"},[a("CoordinateSystem")],1)])]),a("div",{staticClass:"middle-panel"},[a("div",{staticClass:"middle-title-panel"},[a("TreeUnitViewParameterTitle")],1),a("div",{staticClass:"middle-content-panel"},[a("TreeUnitParameterView")],1)]),a("div",{staticClass:"right-panel"},[a("div",{staticClass:"top-panel"},[a("div",{staticClass:"dsl-list-title-panel"},[a("DslListTitle")],1),a("div",{staticClass:"dsl-list-content-panel"},[a("DslList")],1)]),a("div",{staticClass:"bottom-panel"},[a("div",{attrs:{id:"tree-canvas-view-title"}},[a("TreeCanvasViewTitle",{attrs:{title:t.treeCanvasParas.title}})],1),a("div",{attrs:{id:"tree-canvas-view-body"}},[a("div",{attrs:{id:"original-data-view"}},[a("OriginalDataView",{on:{openDataView:t.openDataView,closeDataView:t.closeDataView}})],1),a("div",{attrs:{id:"treecanvas-content-view"}},[a("TreeCanvas",{attrs:{treeCanvasKey:t.treeCanvasKey}})],1)])])])])]),a("el-dialog",{attrs:{title:"Dataset",id:"dataset-dialog",visible:t.dataDialogVisible},on:{"update:visible":function(e){t.dataDialogVisible=e}}},[a("DataDialog",{attrs:{treeDataArray:t.treeDataArray,initTreeDataName:t.initTreeDataName},on:{updateSelectedTreeDateName:t.updateSelectedTreeDateName}})],1),a("el-dialog",{attrs:{title:"TreeDSL",id:"treedsl-dialog",visible:t.treedslDialogVisible},on:{"update:visible":function(e){t.treedslDialogVisible=e}}},[a("TreedslDialog")],1),a("el-dialog",{attrs:{title:"Export",id:"export-dialog",visible:t.exportDialogVisible},on:{"update:visible":function(e){t.exportDialogVisible=e}}},[a("ExportDialog")],1)],1)},r=[],o=a("7618"),s=(a("96cf"),a("3b8d")),l=(a("57e7"),a("cebc")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:t.treeCanvasContainerId}},[a("svg",{staticClass:"tree-canvas",attrs:{id:t.treeCanvasSvgId}},[a("g",{attrs:{id:t.treeCanvasId}})]),a("div",{attrs:{id:"NodeLabel"}})])},d=[],u=a("768b"),h=a("f499"),p=a.n(h),f=(a("7f7f"),a("a481"),a("c5f6"),a("2f62"));function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.x=t.x,this.y=t.y}g.prototype={init:function(){},updateData:function(){},generatePath:function(t){var e=d3.line().x(function(t){return t.x}).y(function(t){return t.y}),a=e(t);return a}};a("55dd");function m(t,e,a,n,i){this.polarAxis=t,this.polarInnerRadius=e,this.polarCenterAngle=a,this.polarCenterPara=n,this.polarDirection=i}function v(t,e,a,n,i){var r=[];for(var o in a)r.push(o);r=r.sort(function(t,e){var a=t.replace("index-",""),n=e.replace("index-","");return a-n});for(var s={},l=0;l<n.length;l++){var c=n[l].data.index;s[c]=n[l]}var d=r[0],u={},h=i.width,p=i.height,f=0,g=0,m=0,v=0,y=0,b=0,D=0,S=0;u[a[d].id]={fatherID:null,x:f,isLeaf:1,y:m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,Width:h,Height:p,depth:0,id:a[d].id,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:s[a[d].id].value};e[t[d]];for(var L=0;L<r.length;L++){var x=r[L],A=u[a[x].id],_=A.Width/a[x].width,C=A.Height/a[x].height;A.Rootx=a[x].root.x*_+y,A.Rooty=a[x].root.y*C+D,A.RootWidth=a[x].root.width*_-y-b,A.RootHeight=a[x].root.height*C-D-S,A.SubtreesX=a[x].subtrees.x*_+y,A.SubtreesY=a[x].subtrees.y*C+D,A.SubtreesWidth=a[x].subtrees.width*_-y-b,A.SubtreesHeight=a[x].subtrees.height*C-D-S,A.depth,u[a[x].id]=A;for(var T=0;T<a[x].subtreeLayout.length;T++){A.isLeaf=0;var R=a[x].subtreeLayout[T].id;u[R]={fatherID:a[x].id,x:A.x+a[x].subtreeLayout[T].x*_+f,y:A.y+a[x].subtreeLayout[T].y*C+m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,isLeaf:1,Width:a[x].subtreeLayout[T].width*_-f-g,Height:a[x].subtreeLayout[T].height*C-m-v,depth:A.depth+1,id:R,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:s[R].value}}}for(var O in u)u[O].translate="translate(0 , 0)";return u}function y(t,e){this.x=t.x,this.y=t.y,this.radius=e}function b(t,e,a,n,i,r){this.width=a,this.height=n,this.x=t,this.y=e,this.id=i,this.path=r}m.prototype={updateData:function(t){this.SubTreeData=t,this.initOrigin(),this.initScale()},initScale:function(){var t=this.SubTreeData,e=t.TreeWidth>t.TreeHeight?t.TreeHeight/2:t.TreeWidth/2,a="clockwise"===this.polarDirection?d3.scaleLinear().range([Math.PI*this.polarCenterAngle,-Math.PI*this.polarCenterAngle]):d3.scaleLinear().range([-Math.PI*this.polarCenterAngle,Math.PI*this.polarCenterAngle]),n=d3.scaleLinear().range([e*this.polarInnerRadius,e]);"y-axis"===this.polarAxis?(a.domain([this.x,this.x+t.TreeWidth]),"top"===this.polarCenterPara?n.domain([this.y,Math.abs(this.y+t.TreeHeight)]):"bottom"===this.polarCenterPara&&n.domain([this.y,Math.abs(this.y-t.TreeHeight)])):"x-axis"===this.polarAxis&&(a.domain([this.y,this.y+t.TreeHeight]),"left"===this.polarCenterPara?n.domain([this.x,Math.abs(this.x+t.TreeWidth)]):"right"===this.polarCenterPara&&n.domain([this.x,Math.abs(this.x-t.TreeWidth)])),this.angleScale=a,this.rScale=n},initOrigin:function(){var t=this._getPolarCenter();this.x=t.x,this.y=t.y},setOrigin:function(t){this.x=t.x,this.y=t.y},generatePath:function(t,e,a){var n=[],i=this.angleScale,r=this.rScale;if("undefined"!==typeof i&&"undefined"!==typeof r||console.log("scale is undefined"),"y-axis"===this.polarAxis)for(var o=0;o<t.length;o++){var s=t[o],l=i(s.x),c=r(s.y),d={angle:l,radius:c};n.push(d)}else if("x-axis"===this.polarAxis)for(var u=0;u<t.length;u++){var h=t[u],p=i(h.y),f=r(h.x),g={angle:p,radius:f};n.push(g)}n=n.sort(function(t,e){return t.radius-e.radius});var m=n[0].radius,v=n[n.length-1].radius;n=n.sort(function(t,e){return t.angle-e.angle});var y=n[0].angle,b=n[n.length-1].angle,D=d3.arc().innerRadius(function(t){return m}).outerRadius(function(t){return v}).startAngle(function(t){return y}).endAngle(function(t){return b}).padAngle(.01).padRadius(0);return D()},calPosition:function(t){var e,a=this.angleScale,n=this.rScale;if("y-axis"===this.polarAxis){var i=a(t.x),r=n(t.y);e={angle:i,radius:r}}else if("x-axis"===this.polarAxis){var o=a(t.y),s=n(t.x);e={angle:o,radius:s}}var l=e.angle-Math.PI/2,c=Math.cos(l)*e.radius,d=Math.sin(l)*e.radius,u={x:c,y:d};return u},_getPolarCenter:function(){var t=this.SubTreeData,e=this.polarCenterPara;return"top"===e?{x:t.x+t.TreeWidth/2,y:t.y}:"bottom"===e?{x:t.x+t.TreeWidth/2,y:t.y+t.TreeHeight}:"left"===e?{x:t.x,y:t.y+t.TreeHeight/2}:"right"===e?{x:t.x+t.TreeWidth,y:t.y+t.TreeHeight/2}:void 0}},y.prototype={init:function(){},updateData:function(){},generatePath:function(){var t=d3.arc().innerRadius(0).outerRadius(this.radius).startAngle(-Math.PI).endAngle(Math.PI);return t()}},b.prototype={init:function(){},updateData:function(){}};var D=a("e649");function S(t,e,a,n,i){var r=[{x:a.x+a.Rootx,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty+a.RootHeight},{x:a.x+a.Rootx+a.RootWidth,y:a.y+a.Rooty},{x:a.x+a.Rootx,y:a.y+a.Rooty}],o={x:a.x+a.Rootx+a.RootWidth/2,y:a.y+a.Rooty+a.RootHeight/2},s={x:n.x+n.TreeWidth/2,y:n.y+n.TreeHeight/2},l=0,c=a.RootWidth>a.RootHeight?a.RootHeight/2:a.RootWidth/2;if("cartesian"===t.Category){if("rectangle"===e){var d=new g;return d.generatePath(r)}if("circle"===e){var u=new y(o,c);return x(u.generatePath(),o["x"],o["y"])}if("hidden"===e){var h=new y(o,l);return x(h.generatePath(),o["x"],o["y"])}}else if("polar"===t.Category){var p="y-axis";"undefined"!==typeof t.PolarAxis&&(p=t.PolarAxis);var f="top";"x-axis"===p&&(f="left"),"undefined"!==typeof t.PolarCenter&&(f=t.PolarCenter);var v=0;"undefined"!==typeof t.PolarInnerRadius&&(v=t.PolarInnerRadius);var b=1;"undefined"!==typeof t.Theta&&(b=t.Theta);var D="clockwise";"undefined"!==typeof t.Direction&&(D=t.Direction);var S=new m(p,v,b,f,D);if("rectangle"===e)return S.updateData(n),x(S.generatePath(r,n),s["x"],s["y"]);if("circle"===e){S.updateData(i);var L=S.calPosition(o);L["x"]=L["x"]+s["x"],L["y"]=L["y"]+s["y"];var A=new y(o,c);return x(A.generatePath(),L["x"],L["y"])}if("hidden"===e){S.updateData(i);var _=S.calPosition(o),C=new y(o,l);return _["x"]=_["x"]+s["x"],_["y"]=_["y"]+s["y"],x(C.generatePath(),_["x"],_["y"])}}}function L(t,e,a,n,i,r){var o={x:n.x+n.TreeWidth/2,y:n.y+n.TreeHeight/2};if("cartesian"===t.Category)return r;if("polar"===t.Category){var s="y-axis";"undefined"!==typeof t.PolarAxis&&(s=t.PolarAxis);var l="top";"x-axis"===s&&(l="left"),"undefined"!==typeof t.PolarCenter&&(l=t.PolarCenter);var c=0;"undefined"!==typeof t.PolarInnerRadius&&(c=t.PolarInnerRadius);var d=1;"undefined"!==typeof t.Theta&&(d=t.Theta);var u="clockwise";"undefined"!==typeof t.Direction&&(u=t.Direction);var h=new m(s,c,d,l,u);if("rectangle"===e){h.updateData(n);var p=h.calPosition(r);return p["x"]=p["x"]+o["x"],p["y"]=p["y"]+o["y"],p}if("circle"===e||"hidden"===e){h.updateData(i);var f=h.calPosition(r);return f["x"]=f["x"]+o["x"],f["y"]=f["y"]+o["y"],f}}}function x(t,e,a){for(var n=D(t),i="",r=0;r<n.length;r++)if(i+=n[r].code,"M"==n[r].code)i+=n[r].x+e+","+(n[r].y+a);else if("L"==n[r].code)i+=n[r].x+e+","+(n[r].y+a);else if("A"==n[r].code){var o=n[r].largeArc?1:0,s=n[r].sweep?1:0;i+=n[r].rx+","+n[r].ry+","+n[r].xAxisRotation+","+o+","+s+","+(n[r].x+e)+","+(n[r].y+a)}return i}function A(t,e,a,n){console.log("dslContentObject",e);var i=[];for(var r in t)i.push(r);i=i.sort(function(t,e){var a=t.replace("index-",""),n=e.replace("index-","");return a-n});var o=i[0],s=[],l=[];for(var c in t)if(s.push(t[c]),null!=t[c].fatherID){var d={beginid:t[c].fatherID,endid:t[c].id};l.push(d)}for(var u=y(s),h=b(u),p=0;p<s.length;p++){var f=s[p],g=u[p];D(f,g,h)}for(var m=0;m<l.length;m++){var v=l[m];v.pathAttr=x(v)}return[s,l];function y(t){for(var e=[],a=0;a<t.length;a++){var n=t[a],i=n.x+n.Rootx+n.RootWidth/2,r=n.y+n.Rooty+n.RootHeight/2;e.push({x:i,y:r})}return e}function b(t){for(var e={xmin:1e6,ymin:1e6,xmax:0,ymax:0},a=0;a<t.length;a++){var n=t[a],i=n.x,r=n.y;e.xmin>i&&(e.xmin=i),e.xmax<i&&(e.xmax=i),e.ymin>r&&(e.ymin=r),e.ymax<r&&(e.ymax=r)}var o={x:e.xmin,y:e.ymin,TreeWidth:e.xmax-e.xmin,TreeHeight:e.ymax-e.ymin};return o}function D(i,r,s){var l=e[a[i.id]].CoordinateSystem.Category,c=n.width/t[o].Width,d=n.height/t[o].Height,u=t[o].x,h=t[o].y,p=e[a[i.id]].Element.Node,f={fatherID:t[i.id].id,x:(t[i.id].x-u)*c,y:(t[i.id].y-h)*d,Rootx:t[i.id].Rootx*c,Rooty:t[i.id].Rooty*d,RootWidth:t[i.id].RootWidth*c,RootHeight:t[i.id].RootHeight*d,isLeaf:t[i.id].isLeaf,Width:t[i.id].Width*c,Height:t[i.id].Height*d,depth:t[i.id].depth},g={};if(g["TreeWidth"]=n.width,g["TreeHeight"]=self.treeHeight,"polar"===l){var m=l,v=i.id;while("polar"===m){if(g["TreeWidth"]=t[v].Width,g["TreeHeight"]=t[v].Height,g["x"]=t[v].x,g["y"]=t[v].y,v=t[v].fatherID,null===v)break;m=e[a[v]].CoordinateSystem.Category}}var y=e[a[i.id]].CoordinateSystem;s["x"]=g["x"],s["TreeWidth"]=g["TreeWidth"],i.element=S(y,p,f,g,s),i.pos=L(y,p,f,g,s,r)}function x(n){var i,r=a[n.beginid],o=e[r].Element.Link,s=n.beginid,l=n.endid,c=t[s].pos.x,d=t[s].pos.y,u=t[l].pos.x,h=t[l].pos.y;switch(o){case"straight":var p=[];p.push([c,d]),p.push([u,h]);var f=d3.line();i=f(p);break;case"curveStepX":var g=[];g.push([c,d]),g.push([u,h]);var m=d3.line().curve(d3.curveStep);i=m(g);break;case"orthogonal":var v=[];v.push([c,d]),v.push([c,(d+h)/2]),v.push([u,(d+h)/2]),v.push([u,h]);var y=d3.line();i=y(v);break;case"curveStepAfter":var b=[];b.push([c,d]),b.push([u,h]);var D=d3.line().curve(d3.curveStepAfter);i=D(b);break;case"curveStepBefore":var S=[];S.push([c,d]),S.push([u,h]);var L=d3.line().curve(d3.curveStepBefore);i=L(S);break;case"curve":var x={source:[c,d],target:[u,h]},A=d3.linkVertical();i=A(x);break;case"linkHorizontal":var _={source:[c,d],target:[u,h]},C=d3.linkHorizontal();i=C(_);break;case"arccurve":var T=(c-u)/2,R=c,O=d,w=u,E=h;T<0&&(T=-T,R=u,O=h,w=c,E=d),i="M"+R+","+O+" A"+T+","+T+" 0 0 0 "+w+","+E;break;case"arccurveBoth":var j=(c-u)/2,P=c,N=u,k=0;j<0&&(j=-j,P=u,h,N=c,d),t[s].depth%2===0&&(k=1),i="M"+P+",150 A"+j+","+j+" 0 0 "+k+" "+N+",150";break}return i}}var _=a("53be"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-view-container"},[a("div",{attrs:{id:"original-data-view-title"}},[a("span",{staticClass:"value"},[t._v(t._s(t.selectedDataset))])]),a("div",{attrs:{id:"original-data-view-content"}},[a("div",{attrs:{id:"inner-data-view-content"}},[a("vue-json-pretty",{attrs:{selectableType:"single",data:t.originalTreeData,deep:t.treeDepth,showDoubleQuotes:!1,highlightMouseoverNode:!0,highlightSelectedNode:!0,selectOnClickNode:!0},model:{value:t.selectedArray,callback:function(e){t.selectedArray=e},expression:"selectedArray"}})],1)]),a("div",{attrs:{id:"data-view-toggle"}},[a("el-tooltip",{staticClass:"labelIcon",attrs:{content:t.selectedDataset,effect:"light"}},[a("el-button",{attrs:{plain:""},on:{click:t.toggleDataView}},[a("i",{staticClass:"icon iconfont",class:t.previewPanelOpen?"icon-zuo":"icon-data"})])],1)],1)])},T=[],R=a("d538"),O=a.n(R),w={name:"OriginalDataView",components:{VueJsonPretty:O.a},props:{},data:function(){return{previewPanelOpen:!1,originalTreeData:{},treeDepth:3,selectedArray:[],OPEN_PREVIEW_PANEL_DURATION:1e3}},created:function(){},mounted:function(){this.initTreeData(),this.initToggleButtonPos()},updated:function(){},watch:{selectedDataset:function(){this.originalTreeData=sysDatasetObj.getTreeDataset()}},computed:Object(l["a"])({},Object(f["d"])(["selectedDataset"])),methods:Object(l["a"])({},Object(f["b"])([]),{initTreeData:function(){this.originalTreeData=sysDatasetObj.getTreeDataset()},initToggleButtonPos:function(){var t=$("#data-view-toggle").width();$("#data-view-toggle").height();$("#data-view-toggle").css({right:-t+"px"})},toggleDataView:function(){this.previewPanelOpen?(this.closeDataPanel(),this.$emit("closeDataView")):(this.openDataPanel(),this.$emit("openDataView"))},openDataPanel:function(){if(!this.previewPanelOpen){var t=this.OPEN_PREVIEW_PANEL_DURATION,e=$("#original-data-view").width();$("#original-data-view").animate({left:"+="+e},t,function(){}),this.previewPanelOpen=!0}},closeDataPanel:function(){if(this.previewPanelOpen){var t=this.OPEN_PREVIEW_PANEL_DURATION,e=$("#original-data-view").width();$("#original-data-view").animate({left:"-="+e},t,function(){}),this.previewPanelOpen=!1}}})},E=w,j=(a("a70f"),a("8a8c"),a("2877")),P=Object(j["a"])(E,C,T,!1,null,"278f3c9f",null),N=P.exports;function k(t,e,a,n){var i=["#08519c","#2171b5","#4292c6","#6baed6","#9ecae1","#c6dbef","#deebf7"],r=["#08519c","#deebf7"],o=d3.extent(n,function(t){return t.depth}),s=o[1]-o[0]+1,l=s/2,c=(i.length-1)/2;l>3?(r[0]=i[c-3],r[1]=i[c+3]):l<=1?(r[0]=i[c-1],r[1]=i[c+1]):(l=Math.round(l),r[0]=i[c-l],r[1]=i[c+l]);for(var d=d3.scaleLinear().domain(o).range(r),u=(n[0],d3.scaleOrdinal(d3.schemeAccent)),h=d3.extent(n,function(t){return t.value}),p=d3.scaleLinear().domain(h).range(r),f=0;f<t.length;f++){var g=t[f],m=g.id,v=e[a[m]];t[f].node_color=y(g,v,n)}return t;function y(t,e,a){var n=e.Element.Color;"undefined"===typeof n&&(n="depth");var i=l(a);if("depth"===n){d3.scaleLinear().domain(o).range(r);return d(t.depth)}if("adaptive"===n){var s=i[t.id];return u(s.data.name)}if("value"===n)return p(t.value);function l(t){for(var e={},a=0;a<t.length;a++){var n=t[a],i=n.data.index;e[i]=n}return e}}}function I(t,e,a,n,i,r,o){for(var s=r/20,l=r/100,c=d3.extent(i,function(t){return t.data.value}),d=Object(u["a"])(c,2),h=d[0],p=d[1],f=d3.scaleLinear().domain([h,p]).range([l,s]),g=0;g<t.length;g++){var m=t[g],v=m.beginid,y=m.endid,b=e[v],D=e[y],S=a[n[v]],L=a[n[y]];m.link_width=x(b,D,S,L,r,o,i)}return t;function x(t,e,a,n,i,r,o){var s=a.Element.Link,l=n.Element.Link,c=a;"hidden"===s&&"hidden"!==l&&(c=n);var d=c.Element.LinkWidth,u=c.Element.LinkWidthRatio;if("undefined"===typeof u&&(u=1),"depth"===d){var h=i/40;h*=u;var p=e.depth;return h/p}if("adaptive"===d){var g=i/200<2?2:i/200;return g*=u,g}if("value"===d){o[0].data.value;return f(e.value)}}}function U(t){var e=JSON.parse(p()(t));for(var a in e)"Element"in e[a]||(e[a].Element={}),"Node"in e[a].Element||(e[a].Element.Node="rectangle"),"Link"in e[a].Element||(e[a].Element.Link="hidden"),"CoordinateSystem"in e[a]||(e[a].CoordinateSystem={},e[a].CoordinateSystem.Category="cartesian");return e}a("e649");var W={name:"TreeCanvas",props:{treeCanvasKey:{type:Number}},data:function(){return{nodeArray:[],hierarchicalData:{},layoutParas:{},treeCanvasSvgId:"tree-dsl-svg-canvas",treeCanvasContainerId:"tree-dsl-canvas-container",treeCanvasId:"tree-dsl-canvas",treeCanvasRectId:"canvas-region-outer-rect",DURATION:1e3,selectedItem:null,posLenCollectionObj:{},regionOuterRectPos:{},singleTreeG:"tree-g",POSITION_DURATION:900,colorAttr:"depth",treeViewPosLenObj:{},currentRootID:"index-0",treeGId:"index-0-g",previewPanelOpen:!1,hybridNodeObjectNum:10,OPEN_PREVIEW_PANEL_DURATION:500,horizontalArray:[0,.5,1],verticalArray:[0,.5,1],treeViewWidth:0,treeViewHeight:0,viewWidth:0,viewHeight:0,layouts:{}}},components:{OriginalDataView:N},created:function(){},mounted:function(){var t=this;setTimeout(function(){t.adjustTreeCanvas(),t.addZoomFunc()},100)},watch:{treeCanvasKey:function(){this.adjustTreeCanvas(),this.updateTreeVisResults()},viewSelectionMode:function(){var t=this.selectedPreviewNodeId;null!=t&&(d3.select("#"+this.treeCanvasId).select("#rootnode"+t).classed("select-root-node",!1),this.onclick(t))},viewSelectionMode2:function(){var t=this.selectedPreviewNodeId;null!=t&&(d3.select("#"+this.treeCanvasId).select("#rootnode"+t).classed("select-root-node",!1),this.onclick(t))},changedDSLNameState:function(){var t=sysDatasetObj.getLayoutParas(),e=t.treeDSLContentObj;"undefined"!==typeof e&&null!=this.treeUnitDSLName&&"undefined"!==typeof e[this.treeUnitDSLName]&&this.updateTreeVisResults()},treeCanvasLayoutState:function(){console.log("update treeCanvasLayoutState"),this.updateTreeVisResults()}},computed:Object(l["a"])({},Object(f["d"])(["treeDSLArray","viewSelectionMode","viewSelectionMode2","focusedTreeObjArray","selectedPreviewNodeId","changedDSLNameState","treeUnitDSLName","treeCanvasLayoutState"])),methods:Object(l["a"])({updateTreeVisResults:function(){var t=this,e=sysDatasetObj.getLayoutParas();t.getLayoutValue(e).then(function(e){t.layouts=e,t.renderTreeVisResults(e)})},renderTreeVisResults:function(t){var e=sysDatasetObj.getNodeArray();this.nodeArray=e,this.layoutParas=sysDatasetObj.getLayoutParas(),this.hierarchicalData=this.layoutParas.hierarchicalData;var a=this.layoutParas.treeDSLContentObj;this.dslContentObject=a;var n=this.layoutParas.treeIndexWithDSL;this.treeIndexWithDSL=n;var i=this.treeViewPosLenObj;this.currentRootID;"undefined"!==typeof n&&"undefined"!==typeof a&&null!=t&&"undefined"!==typeof t&&(console.log("update tree vis results"),this.AreaData=v(n,a,t,e,i),this.appendTreeVisBoundingBox(),this.renderTree(),this.adjustTreePos())},addZoomFunc:function(){var t=this,e=+$("#"+t.treeCanvasSvgId).width(),a=+$("#"+t.treeCanvasSvgId).height(),n=d3.zoom().scaleExtent([.1,40]).translateExtent([[-100,-100],[e+90,a+100]]).on("zoom",i);function i(){d3.select("#"+t.treeCanvasRectId);d3.select("#"+t.treeCanvasId).attr("transform",d3.event.transform)}d3.select("#"+t.treeCanvasSvgId).call(n)},adjustTreePos:function(){var t=this.treeGId,e=this.treeViewPosLenObj;d3.select("#"+t).transition().duration(this.POSITION_DURATION).attr("transform","translate("+e.x+","+e.y+")")},adjustTreeCanvas:function(){var t=this,e=.668;this.viewWidth=$("#"+this.treeCanvasSvgId).width(),this.viewHeight=$("#"+this.treeCanvasSvgId).height();var a=.88*this.viewWidth,n=.88*this.viewHeight;a*e>=n?a=n/e:n=a*e,this.treeWidth=a,this.treeHeight=n,this.viewPaddingTop=(this.viewHeight-this.treeHeight)/2,this.viewPaddingLeft=(this.viewWidth-this.treeWidth)/2;var i={x:this.viewPaddingLeft,y:this.viewPaddingTop,width:this.treeWidth,height:this.treeHeight};d3.select("#"+this.treeCanvasId).select("#"+this.treeCanvasRectId).empty()?d3.select("#"+this.treeCanvasId).append("rect").attr("class","canvas-region-outer").attr("id",this.treeCanvasRectId).attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height).on("click",function(){t.removeControlHighlight()}):d3.select("#"+this.treeCanvasId).select("#"+this.treeCanvasRectId).attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height),this.treeViewPaddingTop=.08*this.treeHeight,this.treeViewPaddingBottom=.08*this.treeHeight,this.treeViewPaddingLeft=.08*this.treeWidth,this.treeViewPaddingRight=.08*this.treeWidth,this.treeViewWidth=this.treeWidth-this.treeViewPaddingLeft-this.treeViewPaddingRight,this.treeViewHeight=this.treeHeight-this.treeViewPaddingTop-this.treeViewPaddingBottom;var r={x:this.treeViewPaddingLeft+this.viewPaddingLeft,y:this.treeViewPaddingTop+this.viewPaddingTop,width:this.treeViewWidth,height:this.treeViewHeight};this.treeViewPosLenObj=r,t.appendTreeVisBoundingBox(),this.renderGuideline(r),d3.select("#"+this.treeCanvasId).select("#"+this.treeGId).remove(),d3.select("#"+this.treeCanvasId).append("g").attr("id",this.treeGId).attr("class",this.singleTreeG).attr("transform","translate("+r.x+","+r.y+")")},appendTreeVisBoundingBox:function(){var t=this,e=this.treeGId,a=this.treeViewPosLenObj,n=0*a.width,i=0*a.height,r=e.replace("-g","")+"-bg";d3.select("#"+this.treeCanvasId).select("#"+r).empty()?(d3.select("#"+this.treeCanvasId).append("rect").attr("id",r).attr("class","tree-vis-region-outer").attr("x",a.x-n).attr("y",a.y-i).attr("width",a.width+2*n).attr("height",a.height+2*i).on("click",function(){t.addControlHighlight()}),t.appendResizeCircle(e)):(d3.select("#"+this.treeCanvasId).select("#"+r).attr("x",a.x-n).attr("y",a.y-i).attr("width",a.width+2*n).attr("height",a.height+2*i),t.repositionResizeCircle(e))},removeControlHighlight:function(){d3.select("#"+this.treeCanvasId).selectAll(".resize-circle-g").classed("highlight",!1),d3.select("#"+this.treeCanvasId).selectAll(".tree-vis-region-outer").classed("highlight",!1)},addControlHighlight:function(){var t=this;d3.select("#"+t.treeCanvasId).select(".resize-circle-g").classed("highlight",!0),d3.select("#"+t.treeCanvasId).select(".tree-vis-region-outer").classed("highlight",!0)},renderGuideline:function(t){var e=t.x,a=t.y,n=t.width,i=t.height;d3.select("#"+this.treeCanvasId).selectAll(".horizontal-mark-line").remove(),d3.select("#"+this.treeCanvasId).selectAll(".horizontal-mark-line").data(this.horizontalArray).enter().append("line").attr("class","horizontal-mark-line mark-line").attr("x1",function(t,a){return e+t*n}).attr("y1",function(t,e){return-1e4}).attr("x2",function(t,a){return e+t*n}).attr("y2",function(t,e){return 1e4}),d3.select("#"+this.treeCanvasId).selectAll(".vertical-mark-line").remove(),d3.select("#"+this.treeCanvasId).selectAll(".vertical-mark-line").data(this.verticalArray).enter().append("line").attr("class","vertical-mark-line mark-line").attr("x1",function(t,e){return-1e4}).attr("y1",function(t,e){return a+t*i}).attr("x2",function(t,e){return 1e4}).attr("y2",function(t,e){return a+t*i})},NodeStrokeWidth:function(t){var e=this.viewHeight>this.viewWidth?this.viewWidth:this.viewHeight,a=e/700;return a+"px"},renderTreeLink:function(t){var e=this,a=e.treeGId,n=d3.select("#"+a).selectAll(".link").data(t);n.enter().append("path").attr("id",function(t,e){return"link"+t.beginid+"to"+t.endid}).attr("class",function(t,e){return"link link-parent-"+t.beginid+" link-child-"+t.endid}).attr("d",function(t,e){return t.pathAttr}).attr("stroke-width",function(t,e){return t.link_width}).attr("fill","none");var i=[],r=[],o=[];n.each(function(t,a){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&i.push(n);var s=t.pathAttr;null!=s&&"undefined"!==typeof s&&r.push(s),o.push(d3.select(this).node()),d3.select(this).transition().duration(e.DURATION).attr("stroke-width",function(t,e){return t.link_width}).attr("fill","none")}),n.exit().remove();var s=function(){n.each(function(t,e){d3.select(this).attr("d",t.pathAttr)})};i.length===r.length?Object(_["tweenPaths"])({duration:e.DURATION,complete:s,from:i,to:r,next:function(t,e){return o[e].setAttribute("d",t)}}):s()},renderTreeNode:function(t){for(var e=this,a=e.nodeArray,n=e.treeGId,i=(this.layouts,1),r=0;r<t.length;r++)i<t[r].depth&&(i=t[r].depth);var o=d3.select("#"+n).selectAll(".lineartree-node").data(t,function(t,e){return t.id});o.enter().append("path").attr("class","lineartree-node").attr("id",function(t,e){return"rootnode"+t.id}).attr("d",function(t,e){return t.element}).on("mouseover",u).on("mousemove",function(t){d3.select("#NodeLabel").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",p).on("click",function(t,a){e.onclick(t.id)}).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1);var s=[],l=[],c=[];o.each(function(t,a){var n=t.element,i=d3.select(this).attr("d");c.push(d3.select(this).node()),s.push(i),l.push(n),d3.select(this).transition().duration(e.DURATION).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1)}),Object(_["tweenPaths"])({duration:e.DURATION,complete:d,from:s,to:l,next:function(t,e){return c[e].setAttribute("d",t)}});var d=function(){o.each(function(t,e){var a=t.element;d3.select(this).attr("d",a)})};function u(t){d3.select("#NodeLabel").style("visibility","visible"),d3.select("#NodeLabel").style("opacity",.9);for(var e=0,n="a",i=0;i<a.length;i++)if(a[i].data.index===t.id){e=a[i].data.value,n=a[i].data.name;break}d3.select("#NodeLabel").html(h(n,e)).style("left",d3.event.pageX-28+"px").style("top",d3.event.pageY-28+"px")}function h(t,e){return"<h4>name: "+t+"<br/>value: "+e+"</h4><table>"}function p(t){d3.select("#NodeLabel").style("visibility","hidden")}o.exit().remove()},getSingleSiblingSameDepthNodeArray:function(t){var e=this.AreaData,a=this.layouts,n=this.viewSelectionMode;if("SingleNode"===n){var i=[t];return i}if("Sibling"===n){var r=s(t);return r}if("SameDepth"===n){var o=l(t);return o}function s(t){var n=[],i=e[t].fatherID;if(null!=i)for(var r=0;r<a[i].subtreeLayout.length;r++){var o=a[i].subtreeLayout[r].id;n.push(o)}else n.push(t);return n}function l(a){var n=[],i=e[t];for(var r in e){var o=e[r];o.depth===i.depth&&n.push(o.id)}return n}},highlightSelectedNodeArray:function(t){var e=this.viewSelectionMode2,a=this.layouts;this.AreaData;d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickunhighlight",!1).classed("clickhighlight",!1).classed("select-root-node",!1),d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickunhighlight",!0);for(var n=[],i=0;i<t.length;i++){var r=t[i],o=[];d3.select("#"+this.treeCanvasId).selectAll("#rootnode"+r).classed("clickhighlight",!0).classed("clickunhighlight",!1),"SingleNode"===e?o=[r]:"Subtree"===e&&(o=l(r));for(var s=0;s<o.length;s++)d3.select("#"+this.treeCanvasId).selectAll("#rootnode"+o[s]).classed("clickhighlight",!0).classed("clickunhighlight",!1),-1===n.indexOf(o[s])&&n.push(o[s])}return n;function l(t){var e=[],n=[t];while(void 0!==t){for(var i=0;i<a[t].subtreeLayout.length;i++){var r=a[t].subtreeLayout[i].id;e.push(r),n.push(r)}t=e.shift()}return n}},unhighlightSelectedNodeArray:function(){d3.select("#"+this.treeCanvasId).selectAll(".lineartree-node").classed("clickunhighlight",!1).classed("clickhighlight",!1).classed("select-root-node",!1)},onclick:function(t){var e=this;e.addControlHighlight();var a=e.getSingleSiblingSameDepthNodeArray(t);if(d3.select("#"+e.treeCanvasId).select("#rootnode"+t).classed("select-root-node")){e.UPDATE_SELECTED_PREVIEW_NODE_ID(null),e.unhighlightSelectedNodeArray();var n=sysDatasetObj.getAllTreeObjIdArray();e.UPDATE_FOCUS_TREE_OBJ_ARRAY(n);var i=sysDatasetObj.getTreeUnitDataset();e.UPDATE_PREVIEW_TREE_OBJ(i)}else{e.UPDATE_SELECTED_PREVIEW_NODE_ID(t);var r=e.highlightSelectedNodeArray(a);d3.select("#"+this.treeCanvasId).select("#rootnode"+t).classed("select-root-node",!0),e.UPDATE_FOCUS_TREE_OBJ_ARRAY(r);var o=sysDatasetObj.findSelectedObjectById(t),s=JSON.parse(p()(o));e.UPDATE_PREVIEW_TREE_OBJ(s)}},renderTreeNodeLabel:function(){var t=self.currentRootID,e=d3.select("#"+currentRootGId).selectAll(".Label").data(treeLayoutArray);function a(e){if("hidden"!==dslContentObject[treeIndexWithDSL[e.id]].Element.Label){var a=self.treeViewPosLenObj.width/AreaData[t].Width,n=self.treeViewPosLenObj.height/AreaData[t].Height,i=(AreaData[t].x,AreaData[t].y,dslContentObject[treeIndexWithDSL[e.id]].CoordinateSystem),r=0,o=0,s=AreaData[e.id].Width,l=AreaData[e.id].Height;if("cartesian"===i&&AreaData[e.id].RootWidth*a>10)for(var c=0;c<nodeArray.length;c++)if(nodeArray[c].data.index===e.id){var d=nodeArray[c].data.name.length;if(10*d<AreaData[e.id].RootHeight*n)return nodeArray[c].data.name}if("polar"===i){var u=i,h=e.id;while("polar"===u){if(r=AreaData[h].x,o=AreaData[h].y,s=AreaData[h].Width,l=AreaData[h].Height,h=AreaData[h].fatherID,null===h)break;u=dslContentObject[treeIndexWithDSL[h]].CoordinateSystem}var p=r+s/2,f=o+l/2,g=s>l?l/2:s/2,m=d3.scaleLinear().range([-Math.PI,Math.PI]),v=d3.scaleLinear().range([0,g]),y="y-axis";if("y-axis"===y){m.domain([r,r+s]),v.domain([o,Math.abs(l+o)]);var b,D,S,L,x=v(AreaData[e.id].y+AreaData[e.id].Rooty),A=v(AreaData[e.id].y+AreaData[e.id].Rooty+AreaData[e.id].RootHeight),_=m(AreaData[e.id].x+AreaData[e.id].Rootx),C=m(AreaData[e.id].x+AreaData[e.id].Rootx+AreaData[e.id].RootWidth);if(b=p-x*Math.sin(_)<p-x*Math.sin(C)?p-x*Math.sin(_):p-x*Math.sin(C),S=p-A*Math.sin(_)>p-A*Math.sin(C)?p-A*Math.sin(_):p-A*Math.sin(C),D=f+x*Math.cos(_)<f+x*Math.cos(C)?f+x*Math.cos(_):f+x*Math.cos(C),L=f+A*Math.cos(_)>f+A*Math.cos(C)?f+A*Math.cos(_):f+A*Math.cos(C),S-b>10)for(var T=0;T<nodeArray.length;T++)if(nodeArray[T].data.index===e.id){var R=nodeArray[T].data.name.length;if(10*R<L-D)return nodeArray[T].data.name}}else if("x-axis"===y){m.domain([o,o+l]),v.domain([r,Math.abs(s+r)]);var O,w,E,j,P=v(AreaData[e.id].x+AreaData[e.id].Rootx),N=v(AreaData[e.id].x+AreaData[e.id].Rootx+AreaData[e.id].RootWidth),k=m(AreaData[e.id].y+AreaData[e.id].Rooty),I=m(AreaData[e.id].y+AreaData[e.id].Rooty+AreaData[e.id].RootHeight);if(O=p-P*Math.sin(k)<p-P*Math.sin(I)?p-P*Math.sin(k):p-P*Math.sin(I),E=p-N*Math.sin(k)>p-N*Math.sin(I)?p-N*Math.sin(k):p-N*Math.sin(I),w=f+P*Math.cos(k)<f+P*Math.cos(I)?f+P*Math.cos(k):f+P*Math.cos(I),j=f+N*Math.cos(k)>f+N*Math.cos(I)?f+N*Math.cos(k):f+N*Math.cos(I),E-O>10)for(var U=0;U<nodeArray.length;U++)if(nodeArray[U].data.index===e.id){var W=nodeArray[U].data.name.length;if(10*W<j-w)return nodeArray[U].data.name}}}}}function n(e){var a=self.treeViewPosLenObj.width/AreaData[t].Width,n=self.treeViewPosLenObj.height/AreaData[t].Height,i=AreaData[t].x,r=AreaData[t].y,o=dslContentObject[treeIndexWithDSL[e.id]].CoordinateSystem.Category,s=0,l=0,c=AreaData[e.id].Width,d=AreaData[e.id].Height;if("cartesian"===o)return s=(AreaData[e.id].x+AreaData[e.id].Rootx+AreaData[e.id].RootWidth/2-i)*a,l=(AreaData[e.id].y+AreaData[e.id].Rooty+AreaData[e.id].RootHeight/2-r)*n,"translate("+s+","+l+")rotate(90)";if("polar"===o){var u=o,h=e.id;while("polar"===u){if(s=AreaData[h].x,l=AreaData[h].y,c=AreaData[h].Width,d=AreaData[h].Height,h=AreaData[h].fatherID,null===h)break;u=dslContentObject[treeIndexWithDSL[h]].CoordinateSystem.Category}var p=s+c/2,f=l+d/2,g=c>d?d/2:c/2,m=d3.scaleLinear().range([-Math.PI,Math.PI]),v=d3.scaleLinear().range([0,g]),y="y-axis";if("y-axis"===y){m.domain([s,s+c]),v.domain([l,Math.abs(d+l)]);var b=v(AreaData[e.id].y+AreaData[e.id].Rooty+AreaData[e.id].RootHeight/2),D=m(AreaData[e.id].x+AreaData[e.id].Rootx+AreaData[e.id].RootWidth/2);s=p-b*Math.sin(D),l=f+b*Math.cos(D)}else if("x-axis"===y){m.domain([l,l+d]),v.domain([s,Math.abs(c+s)]);var S=v(AreaData[e.id].x+AreaData[e.id].Rootx+AreaData[e.id].RootWidth/2),L=m(AreaData[e.id].y+AreaData[e.id].Rooty+AreaData[e.id].RootHeight/2);s=p-S*Math.sin(L),l=f-S*Math.cos(L)}return"translate("+s+","+l+")rotate(90)"}}e.enter().append("text").attr("class","Label").attr("id",function(t){return"NodeLabel"+t.id}).attr("dy",".35em").attr("transform",n).style("text-anchor","middle").style("font","14px sans-serif").text(a),e.transition().duration(self.DURATION).attr("class","Label").attr("id",function(t){return"NodeLabel"+t.id}).attr("dy",".35em").attr("transform",n).text(a),e.exit().remove()},renderTree:function(){var t=this,e=this.treeIndexWithDSL,a=this.dslContentObject,n=this.treeViewPosLenObj,i=(this.layouts,this.AreaData),r=this.nodeArray,o=this.currentRootID,s=U(a),l=A(i,s,e,n,o),c=Object(u["a"])(l,2),d=c[0],h=c[1];d=k(d,s,e,r),h=I(h,i,s,e,r,this.treeViewWidth,this.treeViewHeight),t.renderTreeLink(h),t.renderTreeNode(d)},extractDSLContentObject:function(){for(var t=this.treeDSLArray,e={},a=0;a<t.length;a++){var n=t[a],i=n.editorId,r=n.content;e[i]=r}return e},getSvgCoordinates:function(t,e,a){var n=document.getElementById(this.treeCanvasSvgId),i=n.createSVGPoint();i.x=e,i.y=a;var r=i.matrixTransform(t.getScreenCTM().inverse());return r},repositionResizeCircle:function(t){var e=this,a=d3.select("#"+e.treeCanvasId),n=a.select(".resize-circle-g"),i=a.select(".tree-vis-region-outer"),r=+i.attr("x"),o=+i.attr("y"),s=+i.attr("width"),l=+i.attr("height");n.select(".topleft").attr("cx",r).attr("cy",o),n.select(".bottomright").attr("cx",r+s).attr("cy",o+l)},appendResizeCircle:function(t){var e=this,a=d3.select("#"+e.treeCanvasId),n=d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer"),i=+n.attr("x"),r=+n.attr("y"),o=+n.attr("width"),s=+n.attr("height"),l=a.append("g").attr("class","resize-circle-g");function c(){var a=e.treeViewPosLenObj,n=d3.select(this),i="start"===d3.event.type;if(i||n.classed("hovering")?d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer").classed("resizing",!0):d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer.resizing").classed("resizing",!1),i){var r=d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer"),o=+r.attr("x"),s=+r.attr("y"),l=+r.attr("width"),c=+r.attr("height");e.regionOuterRectPos={x:o,y:s,width:l,height:c}}if(!i){var d=d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer"),u=+d.attr("x"),h=+d.attr("y"),p=+d.attr("width"),f=+d.attr("height"),g=u-e.regionOuterRectPos.x,m=h-e.regionOuterRectPos.y,v=p-e.regionOuterRectPos.width,y=f-e.regionOuterRectPos.height;a.x=a.x+g,a.y=a.y+m,a.width=a.width+v,a.height=a.height+y;t.replace("-g","");e.updateTreeVisResults()}}l.append("circle").attr("class","topleft").attr("cx",i).attr("cy",r).call(d3.drag().container(d3.select("#"+e.treeCanvasId).node()).subject(function(){return{x:d3.event.x,y:d3.event.y}}).on("start end",c).on("drag",m)),l.append("circle").attr("class","bottomright").attr("cx",i+o).attr("cy",r+s).call(d3.drag().container(d3.select("#"+e.treeCanvasId).node()).subject(function(){return{x:d3.event.x,y:d3.event.y}}).on("start end",c).on("drag",m));var d=e.treeWidth+e.viewPaddingLeft,u=e.viewPaddingLeft,h=e.treeHeight+e.viewPaddingTop,p=e.viewPaddingTop,f=0,g=0;function m(t){var n=e.getSvgCoordinates(a.node(),d3.event.sourceEvent.clientX,d3.event.sourceEvent.clientY),i=Math.max(Math.min(n.x,d),u),r=Math.max(Math.min(n.y,h),p),o=d3.select("#"+e.treeCanvasId).select(".tree-vis-region-outer"),s=+o.attr("x"),l=+o.attr("y"),c=+o.attr("width"),m=+o.attr("height");if(d3.select(this).classed("topleft")){var v=Math.max(c+s-i,f);s+=c-v,c=v;var y=Math.max(m+l-r,g);l+=m-y,m=y,d3.select(this).attr("cx",s).attr("cy",l)}else c=i-s,m=r-l,d3.select(this).attr("cx",s+c).attr("cy",l+m);o.attr("x",s).attr("y",l).attr("width",c).attr("height",m)}}},Object(f["c"])(["UPDATE_TREE_DSL_ARRAY_KEY","UPDATE_FOCUS_TREE_OBJ_ARRAY","UPDATE_PREVIEW_TREE_OBJ","UPDATE_SELECTED_PREVIEW_NODE_ID"]),Object(f["b"])(["getLayoutValue"]))},M=W,V=(a("a165"),a("cd36"),a("735c"),a("a7c3"),Object(j["a"])(M,c,d,!1,null,"47bd2256",null)),H=V.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("span",{staticClass:"text"},[t._v(t._s(t.title))]),a("span",{staticClass:"operation"},[a("span",{staticClass:"mode-selection"},[a("el-tooltip",{attrs:{content:"display mode",placement:"left"}},[a("el-dropdown",{on:{command:t.handleViewSelectionModeCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{style:t.boldTextStyleObj},[t._v("h:")]),t._v("\n            "+t._s(t.localSelectionMode1+" ")+"\n            "),a("span",{style:t.boldTextStyleObj},[t._v("v:")]),t._v("\n            "+t._s(t.localSelectionMode2)+"\n            "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("div",{staticClass:"selection-controller",style:t.styleObject},[a("el-row",[a("el-col",{attrs:{offset:1,span:23}},[a("span",{style:t.boldTextStyleObj},[t._v("\n                    SelectionMode (horizontal)\n                  ")])])],1),a("div",{staticClass:"radio-button-container",style:t.radioButtonContainerStyle},[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.changeSelectionMode1},model:{value:t.localSelectionMode1,callback:function(e){t.localSelectionMode1=e},expression:"localSelectionMode1"}},[a("el-radio-button",{attrs:{label:"SingleNode"}}),a("el-radio-button",{attrs:{label:"Sibling"}}),a("el-radio-button",{attrs:{label:"SameDepth"}})],1)],1),a("el-row",[a("el-col",{attrs:{offset:1,span:23}},[a("span",{style:t.boldTextStyleObj},[t._v("\n                      SelectionMode (vertical)\n                    ")])])],1),a("div",{staticClass:"radio-button-container",style:t.radioButtonContainerStyle},[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.changeSelectionMode2},model:{value:t.localSelectionMode2,callback:function(e){t.localSelectionMode2=e},expression:"localSelectionMode2"}},[a("el-radio-button",{attrs:{label:"SingleNode"}}),a("el-radio-button",{attrs:{label:"Subtree"}})],1)],1)],1)])],1)],1)],1)])])},X=[];function B(t){return z.apply(this,arguments)}function z(){return z=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d3.json("hierarchicalData/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)})),z.apply(this,arguments)}var F={name:"TreeCanvasViewTitle",props:{title:{type:String}},data:function(){return{operation:["joint","partition_vertical","partition_horizontal"],partitionDataCollection:{},styleObject:{width:"300px",height:"150px"},boldTextStyleObj:{fontWeight:"bold"},localSelectionMode1:"SameDepth",localSelectionMode2:"Subtree",radioButtonContainerStyle:{margin:"10px"}}},created:function(){},beforeMount:function(){},mounted:function(){},watch:{hierarchicalData:function(){this.partitionDataCollection[this.hierarchicalData.index]=this.hierarchicalData}},computed:Object(l["a"])({},Object(f["d"])(["viewSelectionMode","focusedTreeObj","hierarchicalData","partitionValue","layoutParas","partitionDataObjDic"])),methods:Object(l["a"])({handleViewSelectionModeCommand:function(t){this.UPDATE_VIEW_SELECTION_MODE(t)},clickHandler:function(t){var e=this;if("partition_vertical"===t||"partition_horizontal"===t){var a=this.focusedTreeObj.index;if("undefined"===typeof this.partitionDataObjDic[a]){var n=this.focusedTreeObj.parentGId,i=n.replace("-g",""),r=this.partitionDataObjDic[i],o=v(r,a),s=p()(o);o.partition_children=o.children,delete o.children;var l=JSON.parse(s);this.partitionDataObjDic[l.index]=l;var c={partition_type:t};this.UPDATE_PARTITION_VALUE(c),this.layoutParas.hierarchicalData=JSON.parse(p()(r)),this.getLayouts(this.layoutParas);var d=this.layoutParas.hierarchicalData.index;this.partitionDataObjDic[d]=this.layoutParas.hierarchicalData,setTimeout(function(){e.layoutParas.hierarchicalData=l,console.log("this.layoutParas.hierarchicalData",e.layoutParas.hierarchicalData),e.getLayouts(e.layoutParas);var t=e.layoutParas.hierarchicalData.index;e.partitionDataObjDic[t]=e.layoutParas.hierarchicalData},200)}}else if("joint"===t){var u=this.focusedTreeObj.index;if(console.log("focusNodeId",u),"undefined"!==typeof this.partitionDataObjDic[u])for(var h in this.partitionDataObjDic){var f=this.partitionDataObjDic[h],g=v(f,u);if(console.log("findResult",g),null!=g){var m={partition_type:t,parent_index:f.index,child_index:u};return this.UPDATE_PARTITION_VALUE(m),g.children=g.partition_children,delete g.partition_children,this.layoutParas.hierarchicalData=JSON.parse(p()(f)),this.getLayouts(this.layoutParas),void delete this.partitionDataObjDic[u]}}}function v(t,e){if(t.index===e)return t;if("undefined"!==typeof t.children){for(var a=null,n=0;n<t.children.length;n++)if(a=v(t.children[n],e),null!=a)break;return a}}},iconClass:function(t){var e="icon-"+t;return e},changeSelectionMode1:function(){this.UPDATE_VIEW_SELECTION_MODE(this.localSelectionMode1)},changeSelectionMode2:function(){this.UPDATE_VIEW_SELECTION_MODE2(this.localSelectionMode2)}},Object(f["c"])(["UPDATE_VIEW_SELECTION_MODE","UPDATE_PARTITION_VALUE","UPDATE_VIEW_SELECTION_MODE","UPDATE_VIEW_SELECTION_MODE2"]),Object(f["b"])(["getLayouts"]))},G=F,J=(a("3bf0"),Object(j["a"])(G,Y,X,!1,null,"481ce653",null)),K=J.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"data-dialog"}},[a("div",{staticClass:"content-container"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,multiple:""}},[a("div",{staticClass:"el-upload__text"},[t._v("Drop file here or "),a("em",[t._v("click to upload")])])]),a("span",{staticClass:"inner-label"},[t._v("Your Dateset:")]),a("el-table",{ref:"treeDataTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","default-sort":{prop:"date",order:"descending"},data:t.treeDataArray.filter(function(e){return!t.search||e.fileName.toLowerCase().includes(t.search.toLowerCase())}),border:"",stripe:""},on:{"row-dblclick":t.dataTableRowDBClick,"row-click":t.dataTableRowClick}},[a("el-table-column",{attrs:{property:"fileName",label:"FileName",sortable:""}}),a("el-table-column",{attrs:{property:"nodeNum",label:"NodeNum",sortable:""}}),a("el-table-column",{attrs:{property:"depth",label:"Depth",sortable:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[a("span",{staticClass:"icon iconfont icon-iconfontshanchu"})])]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.treedslDialogVisible=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.treedslDialogVisible=!0}}},[t._v("OK")])],1)])},Q=[],q={name:"DataDialog",components:{},data:function(){return{search:"",fileList:[],selectedTreeDataName:null}},watch:{},props:{treeDataArray:{type:Array},initTreeDataName:{type:String}},created:function(){console.log("treeDataArray",this.treeDataArray)},mounted:function(){this.selectedTreeDataName=this.initTreeDataName,this.setCurrent()},computed:{},methods:{dataTableRowDBClick:function(){},dataTableRowClick:function(t){var e=t.fileName;this.selectedTreeDataName=e,this.setCurrent(),this.updateSelectedTreeDateName(e)},handlePreview:function(){},handleRemove:function(){},handleDelete:function(t,e){this.treeDataArray.splice(t,1)},setCurrent:function(){for(var t=0;t<this.treeDataArray.length;t++){var e=this.treeDataArray[t];if(e.fileName===this.selectedTreeDataName){var a=this.treeDataArray[t];console.log("row",a),this.$refs.treeDataTable.setCurrentRow(a)}}},updateSelectedTreeDateName:function(t){this.$emit("updateSelectedTreeDateName",t)}}},tt=q,et=(a("89e5"),a("19f9"),Object(j["a"])(tt,Z,Q,!1,null,"76fdb94b",null)),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"export-panel",attrs:{gutter:24}},[a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:t.save_as_png}},[a("span",[a("i",{staticClass:"icon iconfont icon-png download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[t._v("Export as PNG")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[t._v("\n               PNG is a bitmap image format which made up of a fixed number of pixels. They have a fixed resolution and cannot be scaled. \n             ")])])])],1),a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:t.save_as_svg}},[a("span",[a("i",{staticClass:"icon iconfont icon-svg download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[t._v("Export as SVG")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[t._v("\n               SVG is a vector image format which uses geometric forms to represent differet parts as discrete objects and are infinitely scalable. \n             ")])])])],1),a("el-col",{attrs:{offset:2,span:20}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"grid-content",attrs:{size:"mini",type:"text"},on:{click:t.save_as_json}},[a("span",[a("i",{staticClass:"icon iconfont icon-format1 download-icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v("\n              \n             "),a("span",{staticClass:"grid-content-title"},[t._v("Export as JSON")]),a("br"),a("br"),a("span",{staticClass:"grid-content-main"},[t._v("\n               JSON is a lightweight data-interchange format. This serves as the visualization template. \n             ")])])])],1)],1)},it=[],rt=a("bc05"),ot=a.n(rt),st={name:"ExportDialog",components:{},data:function(){return{}},created:function(){},mounted:function(){},computed:Object(l["a"])({},Object(f["d"])(["layoutParas"])),methods:{save_as_png:function(){var t=this.appName+"-vis.png",e="tree-dsl-svg-canvas",a="tree-dsl-canvas",n=d3.select(document.getElementById(e)),i=n.select("#"+a);i.selectAll(".mark-line").attr("display","none"),i.select(".tree-g").selectAll(".resize-circle-g").attr("display","none"),ot.a.saveSvgAsPng(n.node(),t).then(function(){i.selectAll(".mark-line").attr("display",null),i.select(".tree-g").selectAll(".resize-circle-g").attr("display",null)})},save_as_svg:function(){console.log("save as svg")},save_as_json:function(){var t=this.nodeArray,e=!1,a=this.layoutParas.treeIndexWithDSL,n=this.layoutParas.treeDSLContentObj;if("undefined"!==typeof t)for(var i=0;i<t.length;i++){var r=t[i];if("undefined"===typeof r.data.dsl){e=!0;break}}var o=this.appName+"-template",s=[];for(var l in a)"default"===a[l]?e&&-1===s.indexOf(a[l])&&s.push(a[l]):-1===s.indexOf(a[l])&&s.push(a[l]);for(var c=0;c<s.length;c++){var d=s[c],u=n[d],h=o+c;0===c&&(h=o),h+=".json",f(u,h,"text/json")}function f(t,e,a){var n=p()(t),i=document.createElement("a"),r=new Blob([n],{type:a});i.href=URL.createObjectURL(r),i.download=e,i.click()}}}},lt=st,ct=(a("71b4"),Object(j["a"])(lt,nt,it,!1,null,null,null)),dt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dsl-dialog"}},[a("div",{staticClass:"content-container"},[a("div",{staticClass:"inner-title first-title"},[t._v("Cartesian System")]),a("div",{staticClass:"tree-collection"},t._l(t.cartesianExampleObjArray,function(e,n){return a("div",{staticClass:"example",class:{selected:-1!==t.selectedDSLArray.indexOf(e.name)},on:{click:function(a){t.selectTreeDSL(e.name)}}},[a("div",{staticClass:"preview",style:e.styleObject}),a("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])])}),0),a("div",{staticClass:"inner-title"},[t._v("Radial System")]),a("div",{staticClass:"tree-collection"},t._l(t.polarExampleObjectArray,function(e,n){return a("div",{staticClass:"example",class:{selected:-1!==t.selectedDSLArray.indexOf(e.name)},on:{click:function(a){t.selectTreeDSL(e.name)}}},[a("div",{staticClass:"preview",style:e.styleObject}),a("div",{staticClass:"name"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\t\n\t\t\t\t\t")])])}),0)])])},ht=[];function pt(){var t={treeDataArray:[{fileName:"flare.json",nodeNum:100,depth:5},{fileName:"tmp50.json",nodeNum:120,depth:3}],initTreeDataName:"tmp50.json",cartesianDSLArray:["ArcTree","BCTh","BCTw","BeamTree","BeamTreeV","CurveTree","GoTree1","GoTree3","IciclePlot","IPTP","NodeLink","NodeLink1","PedVis","Dendrogram","TreemapSlice","TreemapSliceDice"],polarDSLArray:["GoTree2","Sunburst1","Sunburst"],selectedDSLArray:["ArcTree","CurveTree","NodeLink","Sunburst"]};return t}function ft(){this.originalTreeDataStr=null,this.originalTreeData=null,this.nodeArrayWithValue=null,this.selectedDSLObject={},this.allTreeObjIdArray=[],this.layoutParas={},this.originalTreeUnitData=null,this.originalTreeUnitDataStr=null,this.treeUnitNodeArrayWithValue=null}function gt(t){return mt.apply(this,arguments)}function mt(){return mt=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a,n,i,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a=[],n=0;case 2:if(!(n<e.length)){t.next=12;break}return i=e[n],r=i+".json",t.next=7,d3.json("treeDSL/"+r);case 7:o=t.sent,a[i]=o;case 9:n++,t.next=2;break;case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}},t,this)})),mt.apply(this,arguments)}ft.prototype={init:function(){},updateDataset:function(t){this.originalTreeDataStr=p()(t),this.addNodexIndex(t),this.originalTreeData=t,this.nodeArrayWithValue=this.computeNodeArray(t),this.allTreeObjIdArray=this.computeTreeObjIdArray(this.nodeArrayWithValue),this.layoutParas.hierarchicalData=t},findSelectedObjectById:function(t){var e=this.originalTreeData,a=n(e,t);return a;function n(t,e){if(t.index===e)return t;if("undefined"!==typeof t.children)for(var a=null,i=0;i<t.children.length;i++)if(a=n(t.children[i],e),null!=a&&"undefined"!==typeof a)return a}},computeTreeObjIdArray:function(t){console.log("nodeArrayWithValue",t);for(var e=[],a=0;a<t.length;a++)e.push(t[a].data.index);return e},getAllTreeObjIdArray:function(){return this.allTreeObjIdArray},updateTreeUnitDataset:function(t){this.originalTreeUnitDataStr=p()(t),this.addNodexIndex(t),this.originalTreeUnitData=t,this.treeUnitNodeArrayWithValue=this.computeNodeArray(t)},getTreeDataset:function(){return JSON.parse(this.originalTreeDataStr)},getTreeUnitDataset:function(){return this.originalTreeUnitData},getTreeDSLObject:function(t){return this.selectedDSLObject[t]},getNodeArray:function(){return this.nodeArrayWithValue},getTreeUnitNodeArray:function(){return this.treeUnitNodeArrayWithValue},updateLayoutParas:function(t){this.layoutParas=t},getLayoutParas:function(){return this.layoutParas},updateTreeUnitLayoutParas:function(t){this.treeUnitLayoutParas=t},getTreeUnitLayoutParas:function(){return this.treeUnitLayoutParas},computeNodeArray:function(t){var e=d3.hierarchy(t),a=[];return this.computeValue(e,a),a},addNodexIndex:function(t){var e=[],a=0;e.push(t);while(0!==e.length){var n=e.shift();if(n.index="index-"+a,a+=1,void 0!==n.children)for(var i=0;i<n.children.length;i++)e.push(n.children[i])}},computeValue:function(t,e){var a=t.children;if(e.push(t),"undefined"!==typeof a){for(var n=0,i=0;i<a.length;i++)this.computeValue(a[i],e),n+=a[i].data.value;"undefined"===typeof t.data.value&&(t.data.value=n)}},addTopDownIndex:function(t){var e=[],a=0;e.push(t);while(0!==e.length){var n=e.shift();if(n.topDownNodeIndex=a,a+=1,void 0!==n.children)for(var i=0;i<n.children.length;i++)e.push(n.children[i])}},addBottomUpIndex:function(t){var e=0;function a(t){var n=t.children;if("undefined"!==typeof n)for(var i=0;i<n.length;i++)a(n[i]);t.bottomUpNodeIndex=e,e+=1}a(t)},updateSelectedDSLObject:function(t,e){this.selectedDSLObject[t]=e},updateTreeDSLContentObject:function(t,e){var a=this.layoutParas.treeDSLContentObj;"undefined"!==typeof a&&"undefined"!==typeof a[t]&&(a[t]=e)},getSelectedDSLObject:function(t){return this.selectedDSLObject[t]},isDSLObjectExist:function(t){return"undefined"!==typeof this.selectedDSLObject[t]}};var vt={name:"DataDialog",components:{},data:function(){return{cartesianExampleObjArray:[],polarExampleObjectArray:[]}},created:function(){},beforeMount:function(){var t=pt(),e=t.cartesianDSLArray,a=this.initExampleArray(e);this.cartesianExampleObjArray=a;var n=t.polarDSLArray,i=this.initExampleArray(n);this.polarExampleObjectArray=i},mounted:function(){},computed:Object(l["a"])({},Object(f["d"])(["selectedDSLArray"])),methods:{initExampleArray:function(t){for(var e=[],a=0;a<t.length;a++){var n=t[a],i={name:n,styleObject:{backgroundImage:"url(examples/"+n+".png)"}};e.push(i)}return e},selectTreeDSL:function(t){var e=this.selectedDSLArray.indexOf(t);-1===e?this.selectedDSLArray.push(t):this.selectedDSLArray.splice(e,1),sysDatasetObj.isDSLObjectExist(t)||gt([t]).then(function(t){for(var e in t){var a=t[e];sysDatasetObj.updateSelectedDSLObject(e,a)}})}}},yt=vt,bt=(a("1a4d"),Object(j["a"])(yt,ut,ht,!1,null,"565a9fcb",null)),Dt=bt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"coord-container"},[t._m(0),a("div",{staticClass:"component-container"},[a("div",{staticClass:"component-panel",attrs:{id:"coordinate-panel"}},t._l(t.coordArray,function(e){return a("div",{staticClass:"component",attrs:{id:e.id,type:t.coordComponentType}},[a("div",{staticClass:"sketch-figure"},[t.showCoordComponents?a("CoordSketchFigure",{attrs:{coordType:e.name}}):t._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"coord-title"}},[t._v(t._s(e.name))])])])}),0)])])},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[t._v("Coordinate System")])])}],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"sketch-figure-svg"})},At=[],_t={name:"CartesianSketchFigure",components:{},data:function(){return{coordArray:["cartesian","polar","triangle","rectangle"]}},props:{coordType:{type:String}},watch:{coordType:function(){this.renderCoordSketchFigure()}},created:function(){},beforeMount:function(){},mounted:function(){this.renderCoordSketchFigure()},computed:{},methods:{renderCoordSketchFigure:function(){var t=.08*+$(this.$el).width(),e=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height(),i=$(this.$el).width()-t-e,r=$(this.$el).height()-a-n;d3.select(this.$el).select(".coord-canvas").remove();var o=d3.select(this.$el).append("g").attr("transform","translate("+t+","+a+")").attr("class","coord-canvas");switch(this.coordType){case"cartesian":s();break;case"polar":l();break;case"triangle":c();break;case"rectangle":d();break}function s(){o.append("svg:defs").append("svg:marker").attr("id","arrow").attr("refX",2).attr("refY",6).attr("markerWidth",13).attr("markerHeight",13).attr("orient","auto").append("svg:path").attr("d","M2,2 L2,11 L10,6 L2,2"),o.append("line").attr("class","axis").attr("x1",0).attr("y1",r/2).attr("x2",.9*i).attr("y2",r/2).attr("marker-end","url(#arrow)"),o.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r).attr("x2",i/2).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function l(){var t=i>r?r/2:i/2;o.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),o.append("circle").attr("class","polar-circle").attr("cx",i/2).attr("cy",r/2).attr("r",2*t/3),o.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function c(){var t=i>r?r:i,e=d3.symbol().type(d3.symbolTriangle).size(t*t/3);o.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),o.append("path").attr("class","polar-axis").attr("d",e).attr("transform","translate("+i/2+","+.58*r+")"),o.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}function d(){var t=3*(i>r?r:i)/4,e=(i-t)/2,a=(r-t)/2;d3.symbol().type(d3.symbolTriangle).size(t*t/3);o.append("line").attr("class","polar-axis").attr("x1",0).attr("y1",r/2).attr("x2",i).attr("y2",r/2),o.append("rect").attr("class","polar-axis").attr("x",e).attr("y",a).attr("width",t).attr("height",t),o.append("line").attr("class","axis").attr("x1",i/2).attr("y1",r/2).attr("x2",.9*i).attr("y2",.1*r).attr("marker-end","url(#arrow)")}}}},Ct=_t,Tt=(a("62b4"),Object(j["a"])(Ct,xt,At,!1,null,null,null)),Rt=Tt.exports,Ot={name:"CoordinateSystem",components:{CoordSketchFigure:Rt},data:function(){return{coordArray:[{id:"cartesian",name:"cartesian"},{id:"polar",name:"polar"},{id:"triangle",name:"triangle"},{id:"rectangle",name:"rectangle"}],coordComponentType:"CoordinateSystem",elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],showCoordComponents:!1}},watch:{},created:function(){},beforeMount:function(){var t=$(".layout-container").width();console.log("viewWidth",t)},mounted:function(){this.initCoordPanel(),this.showCoordComponents=!0,this.initClickEvent()},computed:Object(l["a"])({},Object(f["d"])(["coordComponent"])),methods:Object(l["a"])({highlightSelectedComponent:function(t){var e="CoordinateSystem";"undefined"!==typeof t&&($(".coord-container .component#"+t).hasClass("selected")?($(".coord-container .component#"+t).removeClass("selected"),this.removeDSLComponent(e)):($(".coord-container .component").removeClass("selected"),$(".coord-container .component#"+t).addClass("selected"),this.addCoordComponent(t))),$(".coord-container .selected").length>0?$(".coord-container .component").addClass("unhighlight"):$(".coord-container .component").removeClass("unhighlight")},addCoordComponent:function(t){var e={CoordinateSystem:{Category:t}};this.setDSLComponent(e)},initClickEvent:function(){var t=this;$(".coord-container .component").click(function(){$(this).attr("type");var e=$(this).attr("id");t.highlightSelectedComponent(e)})},initCoordPanel:function(){var t="25%",e="6.25%",a=.25,n=$(".coord-container .component-container").width();$(".coord-container .el-tabs__content").height();$("#coordinate-panel .component").css("width",t),$("#coordinate-panel .component").css("margin-left",e);var i=n*a,r=1.14*i;$("#coordinate-panel .component").css("height",r+"px");var o=r/5;$("#coordinate-panel .component-title").css("height",o);var s=4*r/5;$("#coordinate-panel .sketch-figure").css("height",s)}},Object(f["c"])(["UPDATE_DSL_COMPONENT_OBJECT_STATE","UPDATE_COORD"]),Object(f["b"])(["setDSLComponent","removeDSLComponent"]))},wt=Ot,Et=(a("c0ae"),Object(j["a"])(wt,St,Lt,!1,null,"b7cbeda8",null)),jt=Et.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-container"},[t._m(0),a("div",{staticClass:"component-container"},[a("el-tabs",{attrs:{type:"card",stretch:""},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:t.root}},[a("div",{staticClass:"component-panel",attrs:{id:"root-panel"}},t._l(t.layoutRootArray,function(e){return a("div",{staticClass:"component",attrs:{id:e.id,type:t.rootLayoutComponentType}},[a("div",{staticClass:"sketch-figure"},[t.showRootComponents?a("layoutSketchFigure",{attrs:{layout:e.name,category:"root"}}):t._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"root-title"}},[t._v(t._s(e.name))])])])}),0)]),a("el-tab-pane",{attrs:{label:t.subtree}},[a("div",{staticClass:"component-panel",attrs:{id:"subtree-panel"}},t._l(t.layoutSubtreeArray,function(e){return a("div",{staticClass:"component",attrs:{id:e.id,type:t.subtreeLayoutComponentType}},[a("div",{staticClass:"sketch-figure"},[t.showSubtreeComponents?a("LayoutSketchFigure",{attrs:{layout:e.name,category:"subtree"}}):t._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"subtree-title"}},[t._v(t._s(e.name))])])])}),0)])],1)],1)])},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[t._v("Layout")])])}],kt=(a("28a5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"sketch-figure-svg"})}),It=[],Ut={name:"LayoutSketchFigure",components:{},data:function(){return{layoutRootArray:["X include | Y within","X juxtapose | Y within","X within | Y within","X include | Y juxtapose","X juxtapose | Y juxtapose","X within | Y juxtapose","X include | Y include","X juxtapose | Y include","X within | Y include"],layoutSubtreeArray:["X align | Y flatten","X flatten | Y flatten","X align | Y align","X flatten | Y align"],DURATION:1e3}},props:{category:{type:String},layout:{type:String}},created:function(){},beforeMount:function(){},watch:{layout:function(){"root"===this.category?this.renderRootSketchFigure():"subtree"===this.category&&this.renderSubtreeSketchFigure()}},mounted:function(){"root"===this.category?(this.appendRootG(),this.renderRootSketchFigure()):"subtree"===this.category&&(this.appendSubtreeG(),this.renderSubtreeSketchFigure())},computed:{},methods:{appendRootG:function(){var t=.08*+$(this.$el).width(),e=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height();this.canvasWidth=$(this.$el).width()-t-e,this.canvasHeight=$(this.$el).height()-a-n,d3.select(this.$el).append("g").attr("class","root-g").attr("transform","translate("+t+","+a+")")},appendSubtreeG:function(){var t=.08*+$(this.$el).width(),e=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height();this.canvasWidth=$(this.$el).width()-t-e,this.canvasHeight=$(this.$el).height()-a-n;d3.select(this.$el).append("g").attr("class","subtree-g").attr("transform","translate("+t+","+a+")")},renderRootSketchFigure:function(){var t=this.layout.split(" | "),e=t[0].replace("X ",""),a=t[1].replace("Y ",""),n=this.computeRootXRange(e),i=this.computeSGXRange(e),r=this.computeRootYRange(a),o=this.computeSGYRange(a),s=this.canvasHeight,l=this.canvasWidth,c=d3.select(this.$el).select(".root-g");c.select(".root").empty()?c.append("rect").attr("class","root").attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*s).attr("height",(r[1]-r[0])*s):c.select(".root").transition().duration(this.DURATION).attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*s).attr("height",(r[1]-r[0])*s),c.select(".sg").empty()?c.append("rect").attr("class","sg").attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",o[0]*s).attr("height",(o[1]-o[0])*s):c.select(".sg").transition().duration(this.DURATION).attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",o[0]*s).attr("height",(o[1]-o[0])*s);this.computeMarkXRange(e)},renderSubtreeSketchFigure:function(){var t=this.layout.split(" | "),e=t[0].replace("X ",""),a=t[1].replace("Y ",""),n=this.computeNode1XRange(e),i=this.computeNode2XRange(e),r=this.computeNode1YRange(a),o=this.computeNode2YRange(a),s=this.canvasHeight,l=this.canvasWidth,c=d3.select(this.$el).select(".subtree-g");c.select(".subtree1").empty()?c.append("rect").attr("class","subtree subtree1").attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*s).attr("height",(r[1]-r[0])*s):c.select(".subtree").transition().duration(this.DURATION).attr("x",n[0]*l).attr("width",(n[1]-n[0])*l).attr("y",r[0]*s).attr("height",(r[1]-r[0])*s),c.select(".subtree2").empty()?c.append("rect").attr("class","subtree subtree2").attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",o[0]*s).attr("height",(o[1]-o[0])*s):c.select(".subtree2").transition().duration(this.DURATION).attr("x",i[0]*l).attr("width",(i[1]-i[0])*l).attr("y",o[0]*s).attr("height",(o[1]-o[0])*s)},computeRootXRange:function(t){switch(t){case"include":return[0,1];case"juxtapose":return[0,.2];case"within":return[.4,.6]}},computeSGXRange:function(t){switch(t){case"include":return[.2,.8];case"juxtapose":return[.4,1];case"within":return[0,1]}},computeRootYRange:function(t){switch(t){case"include":return[0,1];case"juxtapose":return[0,.2];case"within":return[.4,.6]}},computeSGYRange:function(t){switch(t){case"include":return[.2,.8];case"juxtapose":return[.4,1];case"within":return[0,1]}},computeNode1XRange:function(t){switch(t){case"align":return[0,1];case"flatten":return[0,.4]}},computeNode2XRange:function(t){switch(t){case"align":return[.25,.75];case"flatten":return[.6,1]}},computeNode1YRange:function(t){switch(t){case"align":return[0,1];case"flatten":return[0,.4]}},computeNode2YRange:function(t){switch(t){case"align":return[.25,.75];case"flatten":return[.6,1]}},computeMarkXRange:function(t){switch(t){case"include":return[[0,.2],[.8,1]];case"juxtapose":return[.2,.4];case"within":return.5}},computeMarkYRange:function(t){switch(t){case"include":return[[0,.2],[.8,1]];case"juxtapose":return[.2,.4];case"within":return.5}}}},Wt=Ut,$t=(a("06e9"),Object(j["a"])(Wt,kt,It,!1,null,null,null)),Mt=$t.exports,Vt={name:"Layout",components:{LayoutSketchFigure:Mt},data:function(){return{rootLayoutComponentType:"Root",subtreeLayoutComponentType:"Subtree",layoutRootArray:[{id:"x-include-y-within",name:"X include | Y within"},{id:"x-juxtapose-y-within",name:"X juxtapose | Y within"},{id:"x-within-y-within",name:"X within | Y within"},{id:"x-include-y-juxtapose",name:"X include | Y juxtapose"},{id:"x-juxtapose-y-juxtapose",name:"X juxtapose | Y juxtapose"},{id:"x-within-y-juxtapose",name:"X within | Y juxtapose"},{id:"x-include-y-include",name:"X include | Y include"},{id:"x-juxtapose-y-include",name:"X juxtapose | Y include"},{id:"x-within-y-include",name:"X within | Y include"}],layoutSubtreeArray:[{id:"x-align-y-flatten",name:"X align | Y flatten"},{id:"x-flatten-y-flatten",name:"X flatten | Y flatten"},{id:"x-align-y-align",name:"X align | Y align"},{id:"x-flatten-y-align",name:"X flatten | Y align"}],elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],padding:2,showRootComponents:!1,showSubtreeComponents:!1,root:"root-subtree group",subtree:"subtree",layout3_3:{lengthPercentage:"25%",marginPercentage:"6.25%",lengthNum:.25,marginNum:.0625},layout2_2:{lengthPercentage:"40%",marginPercentage:"6.7%",lengthNum:.4,marginNum:.067}}},watch:{},created:function(){},beforeMount:function(){this.root=this.root+" ("+this.layoutRootArray.length+")",this.subtree=this.subtree+" ("+this.layoutSubtreeArray.length+")";$(".layout-container").width()},mounted:function(){var t=+$(".component-container").width(),e=+$(".component-container").height();e>2*t?this.initRootPanelSize(this.layout2_2):this.initRootPanelSize(this.layout3_3),this.initSubtreePanelize(this.layout2_2),this.showRootComponents=!0,this.initClickEvent()},computed:Object(l["a"])({},Object(f["d"])(["rootLayoutComponent","subtreeLayoutComponent"])),methods:Object(l["a"])({handleClick:function(t,e){t.label===this.subtree&&(this.showSubtreeComponents=!0)},initClickEvent:function(){var t=this;$(".layout-container .component").click(function(){var e=$(this).attr("type"),a=$(this).attr("id"),n=a.split("-");e===t.rootLayoutComponentType?t.highlightRootLayoutComponent(a,n):e===t.subtreeLayoutComponentType&&t.highlightSubtreeLayoutComponent(a,n)})},highlightRootLayoutComponent:function(t,e){var a="Root";"undefined"!==typeof t&&($("#root-panel .component#"+t).hasClass("selected")?($("#root-panel .component#"+t).removeClass("selected"),this.removeDSLComponent(a)):($("#root-panel .component").removeClass("selected"),$("#root-panel .component#"+t).addClass("selected"),this.addRootLayoutComponent(e))),$("#root-panel .selected").length>0?$("#root-panel .component").addClass("unhighlight"):$("#root-panel .component").removeClass("unhighlight")},highlightSubtreeLayoutComponent:function(t,e){var a="Subtree";"undefined"!==typeof t&&($("#subtree-panel .component#"+t).hasClass("selected")?($("#subtree-panel .component#"+t).removeClass("selected"),this.removeDSLComponent(a)):($("#subtree-panel .component").removeClass("selected"),$("#subtree-panel .component#"+t).addClass("selected"),this.addSubtreeLayoutComponent(e))),$("#subtree-panel .selected").length>0?$("#subtree-panel .component").addClass("unhighlight"):$("#subtree-panel .component").removeClass("unhighlight")},addRootLayoutComponent:function(t){var e={Layout:{X:{Root:{Relation:t[1]}},Y:{Root:{Relation:t[3]}}}};this.setDSLComponent(e)},addSubtreeLayoutComponent:function(t){var e={Layout:{X:{Subtree:{Relation:t[1]}},Y:{Subtree:{Relation:t[3]}}}};this.setDSLComponent(e)},initRootPanelSize:function(t){var e=t.lengthPercentage,a=t.marginPercentage,n=t.lengthNum,i=(t.marginNum,$(".component-container").width());$(".el-tabs__content").height();$("#root-panel .component").css("width",e),$("#root-panel .component").css("margin-left",a);var r=i*n,o=1.14*r;$("#root-panel .component").css("height",o+"px");var s=o/5;$("#root-panel .component-title").css("height",s);var l=4*o/5;$("#root-panel .sketch-figure").css("height",l)},initSubtreePanelize:function(t){var e=t.lengthPercentage,a=t.marginPercentage,n=t.lengthNum,i=(t.marginNum,$(".component-container").width());$(".el-tabs__content").height();$("#subtree-panel .component").css("width",e),$("#subtree-panel .component").css("margin-left",a);var r=i*n,o=1.14*r;$("#subtree-panel .component").css("height",o+"px");var s=o/5;$("#subtree-panel .component-title").css("height",s);var l=4*o/5;$("#subtree-panel .sketch-figure").css("height",l)}},Object(f["c"])(["UPDATE_ROOT_LAYOUT","UPDATE_SUBTREE_LAYOUT"]),Object(f["b"])(["setDSLComponent","removeDSLComponent"]))},Ht=Vt,Yt=(a("71b3"),Object(j["a"])(Ht,Pt,Nt,!1,null,null,null)),Xt=Yt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"element-container"},[t._m(0),a("div",{staticClass:"component-container"},[a("el-tabs",{attrs:{type:"card",stretch:""},on:{"tab-click":t.handleClick}},[a("el-tab-pane",{attrs:{label:t.nodeLabel}},[a("div",{staticClass:"component-panel",attrs:{id:"node-panel"}},t._l(t.nodeArray,function(e){return a("div",{staticClass:"component",attrs:{id:e.id,name:e.name,type:t.nodeComponentType}},[a("div",{staticClass:"sketch-figure"},[t.showNodeComponents?a("ElementSketchFigure",{attrs:{elementType:e.name,category:"node"}}):t._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"node-title"}},[t._v(t._s(e.name))])])])}),0)]),a("el-tab-pane",{attrs:{label:t.linkLabel}},[a("div",{staticClass:"component-panel",attrs:{id:"link-panel"}},t._l(t.linkArray,function(e){return a("div",{staticClass:"component",attrs:{id:e.id,name:e.name,type:t.linkComponentType}},[a("div",{staticClass:"sketch-figure"},[t.showLinkComponents?a("ElementSketchFigure",{attrs:{elementType:e.name,category:"link"}}):t._e()],1),a("div",{staticClass:"component-title"},[a("span",{staticClass:"component-title-container",attrs:{id:"link-title"}},[t._v(t._s(e.name))])])])}),0)])],1)],1)])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"inner-title"},[t._v("Element")])])}],Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"sketch-figure-svg"})},Gt=[],Jt={name:"LayoutSketchFigure",components:{},data:function(){return{nodeArray:["circle","rectangle","triangle","ellipse"],linkArray:["straight","curve","curveStepBefore","curveStepAfter","orthogonal","arccurve"]}},props:{category:{type:String},elementType:{type:String}},watch:{elementType:function(){"node"===this.category?this.renderNodeSketchFigure():"link"===this.category&&this.renderLinkSketchFigure()}},created:function(){},beforeMount:function(){},mounted:function(){"node"===this.category?this.renderNodeSketchFigure():"link"===this.category&&this.renderLinkSketchFigure()},computed:{},methods:{renderNodeSketchFigure:function(){var t=.08*+$(this.$el).width(),e=.08*+$(this.$el).width(),a=.08*+$(this.$el).height(),n=.08*+$(this.$el).height(),i=$(this.$el).width()-t-e,r=$(this.$el).height()-a-n;d3.select(this.$el).select(".node-canvas").remove();var o=d3.select(this.$el).append("g").attr("transform","translate("+t+","+a+")").attr("class","node-canvas");switch(this.elementType){case"circle":s();break;case"rectangle":l();break;case"triangle":c();break;case"ellipse":d();break}function s(){var t=i>r?r/2:i/2;o.append("circle").attr("class","node").attr("cx",i/2).attr("cy",r/2).attr("r",t)}function l(){var t=i>r?r:i,e=(i-t)/2,a=(r-t)/2;o.append("rect").attr("class","node").attr("x",e).attr("y",a).attr("width",t).attr("height",t)}function c(){var t=i>r?r:i,e=d3.symbol().type(d3.symbolTriangle).size(t*t/2);o.append("path").attr("class","node").attr("d",e).attr("transform","translate("+i/2+","+2*r/3+")")}function d(){o.append("ellipse").attr("class","node").attr("cx",i/2).attr("cy",r/2).attr("rx",i/2).attr("ry",r/4)}},renderLinkSketchFigure:function(){var t=this,e=.08*+$(this.$el).width(),a=.08*+$(this.$el).width(),n=.08*+$(this.$el).height(),i=.08*+$(this.$el).height(),r=$(this.$el).width()-e-a,o=$(this.$el).height()-n-i;d3.select(this.$el).select(".link-canvas").remove();var s=d3.select(this.$el).append("g").attr("transform","translate("+e+","+n+")").attr("class","link-canvas"),l=r>o?o:r,c=l/15,d=2*c,u=2*c,h=r-2*c,p=o-2*c,f=g();function g(){var e,a,n;switch(t.elementType){case"straight":e=[],e.push([d,u]),e.push([h,p]),a=d3.line(),n=a(e);break;case"curve":e={source:[d,u],target:[h,p]},a=d3.linkVertical(),n=a(e);break;case"curveStepBefore":e=[],e.push([d,u]),e.push([h,p]),a=d3.line().curve(d3.curveStepBefore),n=a(e),console.log("lineData curveStepBefore",n);break;case"curveStepAfter":e=[],e.push([d,u]),e.push([h,p]),a=d3.line().curve(d3.curveStepAfter),n=a(e),console.log("lineData curveStepAfter",n);break;case"orthogonal":e=[],e.push([d,u]),e.push([d,(u+p)/2]),e.push([h,(u+p)/2]),e.push([h,p]),a=d3.line(),n=a(e);break;case"arccurve":d=2*c,h=r-2*c,u=3*o/4,p=3*o/4;var i=(d-h)/2,s=d,l=u,f=h,g=p;i<0&&(i=-i,s=h,l=p,f=d,g=u),n="M"+s+","+l+" A"+i+","+i+" 0 0 0 "+f+","+g;break}return n}s.append("path").attr("class","node-link").attr("d",f),s.append("circle").attr("class","node").attr("cx",d).attr("cy",u).attr("r",c),s.append("circle").attr("class","node").attr("cx",h).attr("cy",p).attr("r",c)}}},Kt=Jt,Zt=(a("6aea"),Object(j["a"])(Kt,Ft,Gt,!1,null,null,null)),Qt=Zt.exports,qt={name:"Element",components:{ElementSketchFigure:Qt},data:function(){return{nodeArray:[{id:"circle",name:"circle"},{id:"rectangle",name:"rectangle"},{id:"triangle",name:"triangle"},{id:"ellipse",name:"ellipse"}],linkArray:[{id:"straight",name:"straight"},{id:"curve",name:"curve"},{id:"curve-step-before",name:"curveStepBefore"},{id:"curve-step-after",name:"curveStepAfter"},{id:"orthogonal",name:"orthogonal"},{id:"arccurve",name:"arccurve"}],nodeComponentType:"Node",linkComponentType:"Link",elementNodeArray:[],elementLinkArray:[],coordinateSystemArray:[],showNodeComponents:!1,showLinkComponents:!1,nodeLabel:"Node",linkLabel:"Link"}},watch:{},created:function(){},beforeMount:function(){$(".layout-container").width();this.nodeLabel=this.nodeLabel+" ("+this.nodeArray.length+")",this.linkLabel=this.linkLabel+" ("+this.linkArray.length+")"},mounted:function(){this.initNodePanel(),this.initLinkPanel(),this.showNodeComponents=!0,this.initClickEvent()},computed:{},methods:Object(l["a"])({handleClick:function(t,e){t.label===this.linkLabel&&(this.showLinkComponents=!0)},initClickEvent:function(){var t=this;$(".element-container .component").click(function(){var e=$(this).attr("type"),a=$(this).attr("id"),n=$(this).attr("name");e===t.nodeComponentType?t.highlightSelectedNodeComponent(a,n):e===t.linkComponentType&&t.highlightSelectedLinkComponent(a,n)})},highlightSelectedNodeComponent:function(t,e){var a="Node";"undefined"!==typeof t&&($("#node-panel .component#"+t).hasClass("selected")?($("#node-panel .component#"+t).removeClass("selected"),this.removeDSLComponent(a)):($("#node-panel .component").removeClass("selected"),$("#node-panel .component#"+t).addClass("selected"),this.addNodeElementComponent(e))),$("#node-panel .selected").length>0?$("#node-panel .component").addClass("unhighlight"):$("#node-panel .component").removeClass("unhighlight")},highlightSelectedLinkComponent:function(t,e){var a="Link";"undefined"!==typeof t&&($("#link-panel .component#"+t).hasClass("selected")?($("#link-panel .component#"+t).removeClass("selected"),this.removeDSLComponent(a)):($("#link-panel .component").removeClass("selected"),$("#link-panel .component#"+t).addClass("selected"),this.addLinkElementComponent(e))),$("#link-panel .selected").length>0?$("#link-panel .component").addClass("unhighlight"):$("#link-panel .component").removeClass("unhighlight")},addNodeElementComponent:function(t){var e={Element:{Node:t}};this.setDSLComponent(e)},addLinkElementComponent:function(t){var e={Element:{Link:t}};this.setDSLComponent(e)},initNodePanel:function(){var t="25%",e="6.25%",a=.25,n=$(".element-container .component-container").width();$(".element-container .el-tabs__content").height();$("#node-panel .component").css("width",t),$("#node-panel .component").css("margin-left",e);var i=n*a,r=1.14*i;$("#node-panel .component").css("height",r+"px");var o=r/5;$("#node-panel .component-title").css("height",o);var s=4*r/5;$("#node-panel .sketch-figure").css("height",s)},initLinkPanel:function(){var t="25%",e="6.25%",a=.25,n=$(".element-container .component-container").width();$(".element-container .el-tabs__content").height();$("#link-panel .component").css("width",t),$("#link-panel .component").css("margin-left",e);var i=n*a,r=1.14*i;$("#link-panel .component").css("height",r+"px");var o=r/5;$("#link-panel .component-title").css("height",o);var s=4*r/5;$("#link-panel .sketch-figure").css("height",s)}},Object(f["c"])(["UPDATE_DSL_COMPONENT_OBJECT_STATE","UPDATE_NODE","UPDATE_LINK"]),Object(f["b"])(["setDSLComponent","removeDSLComponent"]))},te=qt,ee=(a("457f"),Object(j["a"])(te,Bt,zt,!1,null,null,null)),ae=ee.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"treedsl-container"}},[a("el-carousel",{attrs:{"indicator-position":"outside",autoplay:!1}},t._l(t.dslArrangement,function(e,n){return t.showPanel?a("el-carousel-item",{key:t.getPanelKey(n)},[a("div",{staticClass:"treedsls",style:t.DSLsStyleObject},t._l(e,function(e){return a("div",{staticClass:"single-treedsl",class:{selected:-1!=t.currentTreeDSLArray.indexOf(e)},style:t.singleDSLStyleObject,attrs:{id:e},on:{click:function(a){t.updateSelectedTreeDSL(e)}}},[a("SinglePreviewFigure",{key:e,attrs:{dslId:e,treeDSLObj:t.getTreeDSLObj(e)}},[t._v("\n\t\t      \t\t\t"+t._s(e)+"\n\t\t      \t\t")]),a("div",{staticClass:"remove-button-container",style:t.deleteButtonContainerStyleObj},[a("el-button",{style:t.buttonStyleObj,attrs:{icon:"el-icon-close",circle:""},on:{click:function(a){a.stopPropagation(),t.removeSelectedDSL(e)}}})],1)],1)}),0)]):t._e()}),1)],1)},ie=[],re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dsl-teaser-container"},[a("div",{staticClass:"example"},[a("div",{staticClass:"preview",style:t.dslObj.styleObject}),a("div",{staticClass:"name"},[t._v(t._s(t.dslObj.name))])])])},oe=[],se=a("df76"),le={name:"GoTreeSketchFigure",components:{GoTreeSketchFigure:ue,Drag:se["Drag"],Drop:se["Drop"]},props:{dslId:{type:String}},data:function(){return{dslObj:{}}},created:function(){},beforeMount:function(){var t=this.dslId,e={name:t,styleObject:{backgroundImage:"url(examples/"+t+".png)"}};this.dslObj=e},mounted:function(){},computed:{},methods:{}},ce=le,de=(a("ff03"),Object(j["a"])(ce,re,oe,!1,null,null,null)),ue=de.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-preview-figure-container"},[a("div",{staticClass:"dsl-figure"},[a("svg",{staticClass:"dsl-preview-canvas"},[a("g",{staticClass:"tree-preview-g",attrs:{id:t.treeGId}})])]),a("div",{staticClass:"dsl-name"},[t._v(t._s(t.dslId))])])},pe=[];var fe={name:"SinglePreviewFigure",components:{},props:{dslId:{type:String},treeDSLObj:{type:Object}},data:function(){return{treeGId:"preview-g",treeViewPosLenObj:{},currentTreeDSLArray:[],AreaData:{},focusedTreeNodeArray:[]}},created:function(){},mounted:function(){var t=this;setTimeout(function(){t.initTreePreviewCanvas(),t.getPreViewTreeLayout()},200)},updated:function(){},watch:{previewTreeObj:function(){this.getPreViewTreeLayout()},changedDSLNameState:function(){this.treeUnitDSLName===this.dslId&&this.getPreViewTreeLayout()}},computed:Object(l["a"])({},Object(f["d"])(["previewTreeObj","changedDSLNameState","treeUnitDSLName"])),methods:Object(l["a"])({initTreePreviewCanvas:function(){var t=$(".dsl-preview-canvas").height(),e=$(".dsl-preview-canvas").width(),a=.05*e,n=.05*e,i=.05*t,r=.05*t,o=e-a-n,s=t-i-r;d3.select(this.$el).select(".tree-preview-g").attr("transform","translate("+a+","+i+")"),this.treeViewPosLenObj={x:0,y:0,width:o,height:s}},updateCurrentDSLArray:function(){for(var t=[],e=this.focusedTreeObjArray,a=sysDatasetObj.getLayoutParas(),n=a.treeIndexWithDSL,i=0;i<e.length;i++){var r=e[i],o=n[r];"undefined"===typeof o&&(o=n.default),-1===t.indexOf(o)&&t.push(o)}this.currentTreeDSLArray=t},generateTreeIndexWihDSL:function(t,e){for(var a={},n=0;n<t.length;n++){var i=t[n].data.index;a[i]=e}return a},getPreViewTreeLayout:function(){var t=this,e=this.dslId,a=JSON.parse(p()(this.previewTreeObj)),n=sysDatasetObj.computeNodeArray(a),i=t.generateTreeIndexWihDSL(n,e);this.focusedTreeNodeArray=n;var r={};r[e]=sysDatasetObj.getSelectedDSLObject(e);var o=U(r),s={hierarchicalData:a,treeDSLContentObj:o,treeIndexWithDSL:i};t.getLayoutValue(s).then(function(e){t.renderPreViewTree(e,o,i,n,s)})},renderPreViewTree:function(t,e,a,n,i){var r=this.treeViewPosLenObj,o=v(a,e,t,n,r);this.AreaData=o;var s=this.treeViewPosLenObj.width,l=this.treeViewPosLenObj.height,c=A(o,e,a,r),d=Object(u["a"])(c,2),h=d[0],p=d[1];h=k(h,e,a,n),p=I(p,o,e,a,n,s,l),this.renderTreeLink(p,i),this.renderTreeNode(h)},renderTreeLink:function(t,e){var a=this,n=a.treeGId,i=d3.select(this.$el).select("#"+n).selectAll(".link").data(t);i.enter().append("path").attr("id",function(t,e){return"link"+t.beginid+"to"+t.endid}).attr("class",function(t,e){return"link link-parent-"+t.beginid+" link-child-"+t.endid}).attr("d",function(t,e){return t.pathAttr}).attr("stroke-width",function(t,e){return t.link_width}).attr("fill","none");var r=[],o=[],s=[];i.each(function(t,e){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&r.push(n);var i=t.pathAttr;null!=i&&"undefined"!==typeof i&&o.push(i),s.push(d3.select(this).node()),d3.select(this).transition().duration(a.DURATION).attr("stroke-width",function(t,e){return t.link_width}).attr("fill","none")}),i.exit().remove();var l=function(){i.each(function(t,e){d3.select(this).attr("d",t.pathAttr)})};r.length===o.length?Object(_["tweenPaths"])({duration:a.DURATION,complete:l,from:r,to:o,next:function(t,e){return s[e].setAttribute("d",t)}}):l()},renderTreeNode:function(t){for(var e=this,a=e.treeGId,n=1,i=0;i<t.length;i++)n<t[i].depth&&(n=t[i].depth);var r=d3.select(this.$el).select("#"+a).selectAll(".lineartree-node").data(t,function(t,e){return t.id});r.enter().append("path").attr("class","lineartree-node").attr("id",function(t,e){return"rootnode"+t.id}).attr("d",function(t,e){return t.element}).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1);var o=[],s=[],l=[];r.each(function(t,a){var n=t.element,i=d3.select(this).attr("d");l.push(d3.select(this).node()),o.push(i),s.push(n),d3.select(this).transition().duration(e.DURATION).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1)}),Object(_["tweenPaths"])({duration:e.DURATION,complete:c,from:o,to:s,next:function(t,e){return l[e].setAttribute("d",t)}});var c=function(){r.each(function(t,e){var a=t.element;d3.select(this).attr("d",a)})};r.exit().remove()}},Object(f["b"])(["getLayoutValue"]))},ge=fe,me=(a("d701"),Object(j["a"])(ge,he,pe,!1,null,null,null)),ve=me.exports,ye={name:"DSLList",components:{GoTreeSketchFigure:ue,SinglePreviewFigure:ve,Drag:se["Drag"],Drop:se["Drop"]},data:function(){return{treeDSLNum:5,dslArrangement:[],showPanel:!1,currentTreeDSLArray:[],singleDSLStyleObject:{},deleteButtonContainerStyleObj:{},infoButtonContainerStyleObj:{},buttonStyleObj:{},DSLsStyleObject:{},singleDSLHorizontalSpace:0}},watch:{selectedDSLArray:function(){this.updateDSLArrangement()},previewTreeObj:function(){this.updateCurrentDSLArray()},selectedDataset:function(){this.updateCurrentDSLArray()}},created:function(){},beforeMount:function(){},mounted:function(){this.updateDSLArrangement(),this.showPanel=!0},computed:Object(l["a"])({},Object(f["d"])(["selectedDSLArray","focusedTreeObjArray","previewTreeObj","selectedDataset","treeUnitDSLName"])),methods:Object(l["a"])({getPanelKey:function(t){return"row-"+t},getTreeDSLObj:function(t){var e=sysDatasetObj.getSelectedDSLObject(t);return e},initDeleteInfoIconStyleObj:function(){var t=+this.singleDSLStyleObject.height.replace("px",""),e=+this.singleDSLStyleObject.width.replace("px",""),a=(this.singleDSLStyleObject.marginTop.replace("px"),e/30),n=e/12,i=-(a+n/2),r=-(t+a+n/2);this.deleteButtonContainerStyleObj={right:i+"px",top:r+"px"},this.infoButtonContainerStyleObj={right:-i+"px",top:r+"px"},this.buttonStyleObj={fontSize:n+"px",padding:a+"px"}},updateDSLArrangement:function(){this.initDSLNum(),this.initDSLArrangement(),this.setContainerPadding(),this.initDeleteInfoIconStyleObj()},initDSLNum:function(){var t=$("#treedsl-container").height(),e=$("#treedsl-container").width(),a=.08,n=.1,i=t*(1-2*a),r=t*a,o=.877*i,s=o*n;this.singleDSLHorizontalSpace=o+2*s;var l=e/this.singleDSLHorizontalSpace;l%1>.9&&(l=Math.round(l)),l=Math.floor(l),this.treeDSLNum=l,this.singleDSLStyleObject={height:i+"px",width:o+"px",marginLeft:s+"px",marginRight:s+"px",marginTop:r+"px",marginBottom:r+"px"}},initDSLArrangement:function(){for(var t=this.selectedDSLArray,e=this.treeDSLNum,a=[],n=0;n<t.length;n++)n%e===0&&a.push([]),a[a.length-1].push(t[n]);this.dslArrangement=a},setContainerPadding:function(){var t=$("#treedsl-container").width(),e=this.treeDSLNum,a=this.singleDSLHorizontalSpace*e;if(t>a){var n=(t-a)/2;this.DSLsStyleObject={paddingLeft:n+"px",paddingRight:n+"px"}}},removeSelectedDSL:function(t){var e=this.selectedDSLArray.indexOf(t);this.selectedDSLArray.splice(e,1)},updateCurrentDSLArray:function(){var t=[],e=sysDatasetObj.getLayoutParas(),a=this.focusedTreeObjArray,n=e.treeIndexWithDSL;for(var i in n)if(-1!==a.indexOf(i)){var r=n[i];-1===t.indexOf(r)&&t.push(r)}this.currentTreeDSLArray=t},updateSelectedTreeDSL:function(t){var e=sysDatasetObj.getLayoutParas();"undefined"===typeof e.treeIndexWithDSL&&(e.treeIndexWithDSL={});var a=e.treeIndexWithDSL,n=this.focusedTreeObjArray;s(n,a,t);var i={};for(var r in a){var o=a[r];i[o]=sysDatasetObj.getTreeDSLObject(o)}function s(t,e,a){for(var n=0;n<t.length;n++){var i=t[n];e[i]=a}}e.treeDSLContentObj=i,this.updateTreeUnitDSLArray(i),this.UPDATE_TREE_UNIT_LAYOUT_STATE(),this.UPDATE_TREE_CANVAS_LAYOUT_STATE(),this.updateCurrentDSLArray()},updateTreeUnitDSLArray:function(t){var e=this,a=[];for(var n in t){var i=!1;e.treeUnitDSLName===n&&(i=!0),a.push({name:n,dslObj:JSON.parse(p()(t[n])),visible:i}),1}this.UPDATE_TREEUNIT_DSL_ARRAY(a),console.log("treeUnitDSLArray",a),setTimeout(function(){if(a.length>=1){var t=a[0].name;e.UPDATE_TREEUNIT_DSL_NAME(t)}},200)},getHybridNodeObjArrayNum:function(){return 0}},Object(f["b"])(["getLayoutValue"]),Object(f["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME","UPDATE_TREE_CANVAS_LAYOUT_STATE","UPDATE_TREE_UNIT_LAYOUT_STATE"]))},be=ye,De=(a("3769"),Object(j["a"])(be,ne,ie,!1,null,null,null)),Se=De.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dsl-list-view-title"},[a("span",{staticClass:"text"},[t._v(t._s(t.title))])])},xe=[],Ae={name:"DSLListTitle",props:{},data:function(){return{title:"GoTreeListView"}},created:function(){},beforeMount:function(){},mounted:function(){},watch:{},computed:{},methods:{saveNewDSL:function(){console.log("save")},removeCurrentDSL:function(){console.log("remove")}}},_e=Ae,Ce=(a("3494"),Object(j["a"])(_e,Le,xe,!1,null,"77afaadc",null)),Te=Ce.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"treeunit-view-title"},[a("span",{staticClass:"text"},[t._v(t._s(t.title))]),a("span",{staticClass:"operation"},[a("el-tooltip",{staticClass:"labelIcon",attrs:{content:"new",effect:"light"}},[a("span",{staticClass:"operation-icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.newDSL(e)}}},[a("span",{staticClass:"icon iconfont icon-xinjian"})])]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-tooltip",{staticClass:"labelIcon",attrs:{content:"save",effect:"light"}},[a("span",{staticClass:"operation-icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.saveDSL(e)}}},[a("span",{staticClass:"icon iconfont icon-baocun"})])]),a("el-divider",{attrs:{direction:"vertical"}}),a("el-tooltip",{staticClass:"labelIcon",attrs:{content:"save as",effect:"light"}},[a("span",{staticClass:"operation-icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.saveAsNewDSL(e)}}},[a("span",{staticClass:"icon iconfont icon-lingcunwei"})])])],1),a("el-dialog",{attrs:{id:"dsl-name-dialog",title:"GoTree Name",visible:t.saveDialogVisible,width:"30%"},on:{"update:visible":function(e){t.saveDialogVisible=e},opened:t.initShowDSLName}},[a("div",{attrs:{id:"dsl-name-hint"}},[t._v("Please enter the name of the GoTree DSL. You can use letters ( "),a("b",[t._v("A-Z")]),t._v(", "),a("b",[t._v("a-z")]),t._v(" ), numbers ( "),a("b",[t._v("0-9")]),t._v(" ) & underline ( "),a("b",[t._v("_")]),t._v(" ). ")]),a("el-input",{attrs:{placeholder:"GoTreeExample1",autofocus:!0},on:{change:t.changeGoTreeName},model:{value:t.gotreeName,callback:function(e){t.gotreeName=e},expression:"gotreeName"}}),a("div",{attrs:{id:"dsl-name-warning-hint"}},[t._v(t._s(t.dslNameWarningHint))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelGoTreeName}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmGoTreeName}},[t._v("Confirm")])],1)],1),a("el-dialog",{attrs:{id:"dsl-name-dialog",title:"GoTree Name",visible:t.saveAsDialogVisible,width:"30%"},on:{"update:visible":function(e){t.saveAsDialogVisible=e},opened:t.initShowDSLName}},[a("el-dialog",{attrs:{width:"30%",title:"Warning",visible:t.overlapDSLDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.overlapDSLDialogVisible=e}}},[a("div",{attrs:{id:"dsl-name-hint"}},[t._v("Do you want to overwrite the existing \n            "),a("span",{staticClass:"highlight"},[a("b",[t._v(t._s(t.gotreeName))])]),t._v(" DSL?\n          ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelOverlapExistingDSL}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmOverlapExistingDSL}},[t._v("Confirm")])],1)]),a("div",{attrs:{id:"dsl-name-hint"}},[t._v("Please enter the name of the GoTree DSL. You can use letters ( "),a("b",[t._v("A-Z")]),t._v(", "),a("b",[t._v("a-z")]),t._v(" ), numbers ( "),a("b",[t._v("0-9")]),t._v(" ) & underline ( "),a("b",[t._v("_")]),t._v(" ). ")]),a("el-input",{attrs:{placeholder:"GoTreeExample1",autofocus:!0},on:{change:t.changeGoTreeName},model:{value:t.gotreeName,callback:function(e){t.gotreeName=e},expression:"gotreeName"}}),a("div",{attrs:{id:"dsl-name-warning-hint"}},[t._v(t._s(t.dslNameWarningHint))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelGoTreeName}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmGoTreeName}},[t._v("Confirm")])],1)],1),a("el-dialog",{attrs:{id:"selection-alert-dialog",title:"Warning",visible:t.selectionAlertDialog,width:"30%"},on:{"update:visible":function(e){t.selectionAlertDialog=e}}},[a("div",{attrs:{id:"dsl-name-hint"}},[t._v("Please select one GoTree DSL from GoTreeListView or select components to create one GoTree DSL. ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.selectionAlertDialog=!1}}},[t._v("Confirm")])],1)])],1)},Oe=[],we={name:"TreeUnitParameterTitle",props:{},data:function(){return{title:"TreeUnitView",saveAsDialogVisible:!1,saveDialogVisible:!1,selectionAlertDialog:!1,overlapDSLDialogVisible:!1,gotreeName:"",dslNameDialogComponentKey:1,dslNameWarningHint:""}},created:function(){},beforeMount:function(){},mounted:function(){},watch:{},computed:Object(l["a"])({},Object(f["d"])(["treeUnitDSLArray","treeUnitDSLName","selectedDSLArray"])),methods:Object(l["a"])({newDSL:function(){for(var t=0,e=0;e<this.treeUnitDSLArray.length;e++){var a=this.treeUnitDSLArray[e],n=a.name,i=+n.replace("untitled","");i>t&&(t=i)}var r={};r.name="untitled"+(t+1),r.dslObj={Layout:{Category:"AxisIndependent",Mode:"bottom-up"}},this.treeUnitDSLArray.push(r),this.UPDATE_TREEUNIT_DSL_NAME(r.name)},saveDSL:function(){var t=pt(),e=t.cartesianDSLArray,a=t.polarDSLArray,n=this.goTreeName;if("undefined"===typeof n&&(n=this.treeUnitDSLName),null==this.treeUnitDSLName)this.selectionAlertDialog=!0;else{var i=-1!==a.indexOf(n),r=-1!==e.indexOf(n);!sysDatasetObj.isDSLObjectExist(n)||i||r?this.saveDialogVisible=!0:this.updateSelectedDSLArray()}},saveAsNewDSL:function(){null==this.treeUnitDSLName?this.selectionAlertDialog=!0:this.saveAsDialogVisible=!0},cancelOverlapExistingDSL:function(){this.overlapDSLDialogVisible=!1},confirmOverlapExistingDSL:function(){this.overlapDSLDialogVisible=!1,this.updateDSLArray(),this.saveAsDialogVisible=!1},removeCurrentDSL:function(){console.log("remove")},cancelGoTreeName:function(t){this.saveAsDialogVisible=!1},confirmGoTreeName:function(){var t=pt(),e=t.cartesianDSLArray,a=t.polarDSLArray,n=this.goTreeName;"undefined"===typeof n&&(n=this.treeUnitDSLName);var i=-1!==a.indexOf(n),r=-1!==e.indexOf(n);function o(t){var e=/^[0-9a-zA-Z]\w*$/;return!!e.test(t)}o(n)?i||r?this.dslNameWarningHint="The name already exists in the Gallary. Please use another name.":(this.dslNameWarningHint="",sysDatasetObj.isDSLObjectExist(n)?this.overlapDSLDialogVisible=!0:(this.updateDSLArray(),this.saveAsDialogVisible=!1,this.saveDialogVisible=!1)):this.dslNameWarningHint="The name does not match the above rule."},updateDSLArray:function(){this.updateTreeUnitDSLArray(),this.updateSelectedDSLArray()},updateTreeUnitDSLArray:function(){for(var t=0;t<this.treeUnitDSLArray.length;t++)if(this.treeUnitDSLArray[t].name===this.treeUnitDSLName){this.treeUnitDSLArray[t].name=this.gotreeName;break}this.UPDATE_TREEUNIT_DSL_NAME(this.gotreeName)},updateSelectedDSLArray:function(){for(var t=this.gotreeName,e=0;e<this.treeUnitDSLArray.length;e++)if(this.treeUnitDSLArray[e].name===t){var a=this.treeUnitDSLArray[e].dslObj;sysDatasetObj.updateSelectedDSLObject(t,a),sysDatasetObj.updateTreeDSLContentObject(t,a)}-1===this.selectedDSLArray.indexOf(t)&&this.selectedDSLArray.push(t),this.UPDATE_CHANGED_DSL_NAME_STATE()},changeGoTreeName:function(t){"undefined"!==typeof t&&(this.goTreeName=t)},initShowDSLName:function(){console.log("initShowDSLName",this.treeUnitDSLName),this.gotreeName=this.treeUnitDSLName,console.log("initShowDSLName this.goTreeName",this.gotreeName)}},Object(f["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME","UPDATE_CHANGED_DSL_NAME_STATE"]))},Ee=we,je=(a("72d2"),Object(j["a"])(Ee,Re,Oe,!1,null,"5f90c810",null)),Pe=je.exports,Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"treeunit-parameter-container"}},[a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":t.handleClick,"tab-remove":t.removeTab},model:{value:t.editableDSLName,callback:function(e){t.editableDSLName=e},expression:"editableDSLName"}},t._l(t.treeUnitDSLArray,function(e,n){return a("el-tab-pane",{attrs:{label:e.name,name:e.name}},[a("div",{staticClass:"top-panel",style:t.topPanelStyleObj},[e.visible?a("TreeUnitView",{attrs:{dslName:e.name,dslObj:e.dslObj}}):t._e()],1),a("div",{staticClass:"bottom-panel",style:t.bottomPanelStyleObj},[e.visible?a("ParameterView",{attrs:{dslName:e.name,dslObj:e.dslObj}}):t._e()],1)])}),1)],1)},ke=[],Ie=(a("d25f"),a("ac6a"),a("f3e2"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"treeunit-container"},[a("svg",{staticClass:"tree-unit-canvas",attrs:{width:"100%",height:"100%",id:t.treeCanvasId}},[a("g",{staticClass:"tree-unit-g",attrs:{id:t.treeGId}})])])}),Ue=[],We=a("a745"),$e=a.n(We);function Me(t,e,a,n,i){var r=[];for(var o in a)r.push(o);r=r.sort(function(t,e){var a=t.replace("index-",""),n=e.replace("index-","");return a-n});for(var s={},l=0;l<n.length;l++){var c=n[l].data.index;s[c]=n[l]}var d=r[0],u={},h=i.width,p=i.height,f=0,g=0,m=0,v=0,y=0,b=0,D=0,S=0;function L(t,e,a,n){return{x:t,y:e,width:a-t,height:n-e}}var x=2;u[a[d].id]={fatherID:null,x:f,isLeaf:1,y:m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,Width:h,Height:p,depth:0,id:a[d].id,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:s[a[d].id].value};for(var A=e[t[d]],_=0;_<r.length;_++){var C=r[_],T=u[a[C].id],R=T.Width/a[C].width,O=T.Height/a[C].height;T.Rootx=a[C].root.x*R+y,T.Rooty=a[C].root.y*O+D,T.RootWidth=a[C].root.width*R-y-b,T.RootHeight=a[C].root.height*O-D-S,T.SubtreesX=a[C].subtrees.x*R+y,T.SubtreesY=a[C].subtrees.y*O+D,T.SubtreesWidth=a[C].subtrees.width*R-y-b,T.SubtreesHeight=a[C].subtrees.height*O-D-S,T.others={X:{RootLeftPadding:L(T.Rootx,T.y,T.SubtreesX,T.y+T.Height),RootRightPadding:L(T.SubtreesX+T.SubtreesWidth,T.y,T.Rootx+T.RootWidth,T.y+T.Height),RootMargin:T.Rootx<=T.SubtreesX?L(T.Rootx+T.RootWidth,T.y,T.SubtreesX,T.y+T.Height):L(T.SubtreesX+T.SubtreesWidth,T.y,T.Rootx,T.y+T.Height),RootAlignment:L(T.Rootx+T.RootWidth/2-x/2,T.y,T.Rootx+T.RootWidth/2+x/2,T.y+T.Height),SubtreeMargin:[],SubtreeAlignment:L(T.SubtreesX+T.SubtreesWidth/2-x/2,T.y,T.SubtreesX+T.SubtreesWidth/2+x/2,T.y+T.Height)},Y:{RootLeftPadding:L(T.x,T.Rooty,T.x+T.Width,T.SubtreesY),RootRightPadding:L(T.x,T.SubtreesY+T.SubtreesHeight,T.x+T.Width,T.Rooty+T.RootHeight),RootMargin:T.Rooty<=T.SubtreesY?L(T.x,T.Rooty+T.RootHeight,T.x+T.Width,T.SubtreesY):L(T.x,T.SubtreesY+T.SubtreesHeight,T.x+T.Width,T.Rooty),RootAlignment:L(T.x,T.Rooty+T.RootHeight/2-x/2,T.x+T.Width,T.Rooty+T.RootHeight/2+x/2),SubtreeMargin:[],SubtreeAlignment:L(T.x,T.SubtreesY+T.SubtreesHeight/2-x/2,T.x+T.Width,T.SubtreesY+T.SubtreesHeight/2+x/2)}},"include"===A.Layout.X.Root.Relation&&(delete T.others.X.RootMargin,delete T.others.X.RootAlignment),"juxtapose"===A.Layout.X.Root.Relation&&(delete T.others.X.RootLeftPadding,delete T.others.X.RootRightPadding,delete T.others.X.RootAlignment),"within"===A.Layout.X.Root.Relation&&(delete T.others.X.RootLeftPadding,delete T.others.X.RootRightPadding,delete T.others.X.RootMargin,"Alignment"in A.Layout.X.Root&&("left"===A.Layout.X.Root.Alignment&&(T.others.X.RootAlignment=L(T.Rootx,T.y,T.Rootx+x,T.y+T.Height)),"right"===A.Layout.X.Root.Alignment&&(T.others.X.RootAlignment=L(T.Rootx+T.RootWidth-x,T.y,T.Rootx+T.RootWidth,T.y+T.Height)))),"flatten"===A.Layout.X.Subtree.Relation&&delete T.others.X.SubtreeAlignment,"align"===A.Layout.X.Subtree.Relation&&(delete T.others.X.SubtreeMargin,"Alignment"in A.Layout.X.Subtree&&("left"===A.Layout.X.Subtree.Alignment&&(T.others.X.SubtreeAlignment=L(T.SubtreesX,T.y,T.SubtreesX+x,T.y+T.Height)),"right"===A.Layout.X.Subtree.Alignment&&(T.others.X.SubtreeAlignment=L(T.SubtreesX+T.SubtreesWidth-x,T.y,T.SubtreesX+T.SubtreesWidth,T.y+T.Height)))),"include"===A.Layout.Y.Root.Relation&&(delete T.others.Y.RootMargin,delete T.others.Y.RootAlignment),"juxtapose"===A.Layout.Y.Root.Relation&&(delete T.others.Y.RootLeftPadding,delete T.others.Y.RootRightPadding,delete T.others.Y.RootAlignment),"within"===A.Layout.Y.Root.Relation&&(delete T.others.Y.RootLeftPadding,delete T.others.Y.RootRightPadding,delete T.others.Y.RootMargin,"Alignment"in A.Layout.Y.Root&&("top"===A.Layout.Y.Root.Alignment&&(T.others.Y.RootAlignment=L(T.x,T.Rooty,T.x+T.Width,T.Rooty+x)),"bottom"===A.Layout.Y.Root.Alignment&&(T.others.Y.RootAlignment=L(T.x,T.Rooty+T.RootHeight-x,T.x+T.Width,T.Rooty+T.RootHeight)))),"flatten"===A.Layout.Y.Subtree.Relation&&delete T.others.Y.SubtreeAlignment,"align"===A.Layout.Y.Subtree.Relation&&(delete T.others.Y.SubtreeMargin,"Alignment"in A.Layout.Y.Subtree&&("top"===A.Layout.Y.Subtree.Alignment&&(T.others.Y.SubtreeAlignment=L(T.x,T.SubtreesY,T.x+T.Width,T.SubtreesY+T.SubtreesHeight+x)),"bottom"===A.Layout.Y.Subtree.Alignment&&(T.others.Y.SubtreeAlignment=L(T.x,T.SubtreesY+T.SubtreesHeight-x,T.x+T.Width,T.SubtreesY+T.SubtreesHeight)))),T.depth,u[a[C].id]=T;for(var w=0;w<a[C].subtreeLayout.length;w++){T.isLeaf=0;var E=a[C].subtreeLayout[w].id;if(u[E]={fatherID:a[C].id,x:T.x+a[C].subtreeLayout[w].x*R+f,y:T.y+a[C].subtreeLayout[w].y*O+m,Rootx:0,Rooty:0,RootWidth:0,RootHeight:0,isLeaf:1,Width:a[C].subtreeLayout[w].width*R-f-g,Height:a[C].subtreeLayout[w].height*O-m-v,depth:T.depth+1,id:E,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,others:{},value:s[E].value},w>0){var j=a[C].subtreeLayout[w-1].id;"flatten"===A.Layout.X.Subtree.Relation&&T.others.X.SubtreeMargin.push(L(u[j].x+u[j].Width,T.SubtreesY,u[E].x,T.SubtreesY+T.SubtreesHeight)),"flatten"===A.Layout.Y.Subtree.Relation&&T.others.Y.SubtreeMargin.push(L(T.SubtreesX,u[j].y+u[j].Height,T.SubtreesX+T.SubtreesWidth,u[E].y))}}}for(var P in u)u[P].translate="translate(0 , 0)";return console.log(u),u}var Ve,He={name:"TreeUnitView",components:{},data:function(){return{treeCanvasId:"tree-canvas",treeGId:"tree-unit-g",rootLayoutComponentType:"root-layout",subtreeLayoutComponentType:"subtree-layout",nodeComponentType:"node",linkComponentType:"link",coordComponentType:"coordinate_system",treeViewPosLenObj:{},DURATION:1e3,nodeFillColor:"steelblue",NodeStrokeWidth:"1px",treeUnitLayoutParas:{},initialDSLObj:{}}},props:{dslName:{type:String},dslObj:{type:Object}},created:function(){},mounted:function(){var t=this,e=$(".tree-unit-canvas").width(),a=$(".tree-unit-canvas").height(),n=.1*a,i=.1*a,r=.1*e,o=.1*e;t.treeViewPosLenObj={x:0,y:0,width:e-r-o,height:a-n-i},d3.select(t.$el).select(".tree-unit-g").attr("transform","translate("+r+","+n+")"),console.log("mounted updateTreeUnitView"),t.updateTreeUnitView()},updated:function(){console.log("updated")},watch:{treeUnitLayoutState:function(){this.dslName===this.treeUnitDSLName&&(console.log("watch updateTreeUnitView"),this.updateTreeUnitView())}},computed:Object(l["a"])({},Object(f["d"])(["hierarchicalData","nodeArray","hierarchicalDSL","hoveringDSLItem","focusedDSLObj","focusedDSLObjIndex","dslComponentObject","treeUnitLayoutState","treeUnitDSLName"])),methods:Object(l["a"])({},Object(f["c"])(["UPDATE_ROOT_LAYOUT","UPDATE_SUBTREE_LAYOUT","UPDATE_NODE","UPDATE_LINK","UPDATE_COORD"]),Object(f["b"])(["getLayoutValue"]),{updateTreeUnitView:function(){var t=this;this.updateTreeUnitLayoutParas();var e=this.treeUnitLayoutParas;this.getLayoutValue(e).then(function(e){t.renderTreeUnit(e)})},updateTreeUnitLayoutParas:function(){var t=sysDatasetObj.getTreeUnitDataset(),e=sysDatasetObj.getTreeUnitNodeArray(),a={},n=this.dslName,i=this.dslObj;this.initialDSLObj=JSON.parse(p()(i)),a[n]=i;for(var r={},o=0;o<e.length;o++){var s=e[o].data.index;r[s]=n}this.treeUnitLayoutParas={hierarchicalData:t,treeIndexWithDSL:r,treeDSLContentObj:a}},renderTreeUnit:function(t){var e=this.initialDSLObj,a=this.treeUnitLayoutParas,n=a.treeIndexWithDSL,i=sysDatasetObj.getTreeUnitNodeArray(),r=JSON.parse(p()(a.treeDSLContentObj)),o=this.treeViewPosLenObj,s=this.treeViewPosLenObj.width,l=this.treeViewPosLenObj.height;if("undefined"!==typeof n&&"undefined"!==typeof r){var c=Me(n,r,t,i,o),d=U(r),h=A(c,d,n,o),f=Object(u["a"])(h,2),g=f[0],m=f[1];g=k(g,d,n,i),m=I(m,c,d,n,i,s,l);var v=this.getParasSpaceData(c),y=this.getParasTreeIndexWithDSL(n,v),b=this.getParasDslContentObjectWithDefault(d),D=A(v,b,y,o),S=Object(u["a"])(D,2),L=S[0];S[1];this.renderTreeParas(L),"Element"in e&&("Link"in e["Element"]?(console.log("renderTreeLink"),this.renderTreeLink(m)):this.removeTreeLink(),"Node"in e["Element"]?(console.log("renderTreeNode"),this.renderTreeNode(g)):this.removeTreeNode())}},parasVisibility:function(t,e){var a=this.initialDSLObj;return("root"===t||"RootMargin"===e||"RootLeftPadding"===e||"RootRightPadding"===e||"RootAlignment"===e)&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]&&"Root"in a["Layout"]["X"]&&"Root"in a["Layout"]["Y"]?"visible":("subtree-group"===t||"SubtreeMargin"===e||"SubtreeAlignment"===e)&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]?"visible":"subtree"===t&&"Layout"in a&&"X"in a["Layout"]&&"Y"in a["Layout"]&&"Subtree"in a["Layout"]["X"]&&"Subtree"in a["Layout"]["Y"]?"visible":"hidden"},renderTreeParas:function(t){var e=this,a=e.treeGId;t=t.reverse(),console.log("parasAreaDataArray",t);var n=d3.select("#"+a).selectAll(".paras-node").data(t,function(t,e){return t.id});n.enter().append("path").attr("id",function(t,e){return"parasnode"+t.id}).attr("class",function(t,e){return"paras-node "+t.elementClass}).attr("d",function(t,e){return t.element}).attr("visibility",function(t,a){return e.parasVisibility(t.elementClass,t.elementName)});var i=[],r=[],o=[];n.each(function(t,a){var n=t.element,s=d3.select(this).attr("d");o.push(d3.select(this).node()),i.push(s),r.push(n),d3.select(this).transition().duration(e.DURATION).attr("visibility",function(t,a){return e.parasVisibility(t.elementClass,t.elementName)})}),Object(_["tweenPaths"])({duration:e.DURATION,complete:s,from:i,to:r,next:function(t,e){return o[e].setAttribute("d",t)}});var s=function(){n.each(function(t,e){var a=t.element;d3.select(this).attr("d",a)})};n.exit().remove()},getParasDslContentObjectWithDefault:function(t){var e=JSON.parse(p()(t));for(var a in e)e[a].Element.Node="rectangle";return e},getParasTreeIndexWithDSL:function(t,e){var a=JSON.parse(p()(t)),n=a["index-0"];for(var i in e)i in a||(a[i]=n);return a},getParasSpaceData:function(t){var e=2,a=2,n=JSON.parse(p()(t)),i=n["index-0"],r=i.others,o=r.X,s=r.Y,l={RootLeftPadding:"padding",RootRightPadding:"padding",SubtreeMargin:"margin",RootAlignment:"alignment",SubtreeAlignment:"alignment"},c=[];for(var d in n){var u=n[d];u.elementClass="index-0"===d?"root":"subtree",u.Rootx=u.Rootx+a,u.Rooty=u.Rooty+a,u.RootWidth=u.RootWidth-2*a,u.RootHeight=u.RootHeight-2*a,c.push(n[d])}var h={x:i.SubtreesX-e,y:i.SubtreesY-e,width:i.SubtreesWidth+2*e,height:i.SubtreesHeight+2*e},f="subtree-group",g="SubtreeGroup",m=j(h,f,g);for(var v in c.push(m),o){var y=l[v],b=v;if($e()(o[v]))for(var D=0;D<o[v].length;D++){var S=j(o[v][D],y,b);c.push(S)}else{var L=j(o[v],y,b);c.push(L)}}for(var x in s){var A=l[x],_=x;if($e()(s[x]))for(var C=0;C<s[x].length;C++){var T=j(s[x][C],A,_);c.push(T)}else{var R=j(s[x],A,_);c.push(R)}}for(var O={},w=0;w<c.length;w++){var E=c[w].elementClass;"root"!==E&&(c[w].fatherID="index-0"),"undefined"===typeof c[w].id&&(c[w].id="index-"+w),O["index-"+w]=c[w]}return O;function j(t,e,a){var n=t.width,i=t.height,r=t.x,o=t.y,s={x:r,y:o,Width:n,Height:i,Rootx:0,Rooty:0,RootWidth:n,RootHeight:i,SubtreesX:0,SubtreesY:0,SubtreesWidth:0,SubtreesHeight:0,fatherID:null,elementClass:e,elementName:a};return s}},removeTreeLink:function(){var t=this.treeGId;d3.select("#"+t).selectAll(".link").remove()},renderTreeLink:function(t){var e=this,a=e.treeGId,n=d3.select("#"+a).selectAll(".link").data(t);n.enter().append("path").attr("id",function(t,e){return"link"+t.beginid+"to"+t.endid}).attr("class",function(t,e){return"link link-parent-"+t.beginid+" link-child-"+t.endid}).attr("d",function(t,e){return t.pathAttr}).attr("stroke-width",function(t){return t.link_width}).attr("fill","none");var i=[],r=[],o=[];n.each(function(t,a){var n=d3.select(this).attr("d");null!=n&&"undefined"!==typeof n&&i.push(n);var s=t.pathAttr;null!=s&&"undefined"!==typeof s&&r.push(s),o.push(d3.select(this).node()),d3.select(this).transition().duration(e.DURATION).attr("stroke-width",function(t){return t.link_width}).attr("fill","none")}),n.exit().remove();var s=function(){n.each(function(t,e){d3.select(this).attr("d",t.pathAttr)})};i.length===r.length?Object(_["tweenPaths"])({duration:e.DURATION,complete:s,from:i,to:r,next:function(t,e){return o[e].setAttribute("d",t)}}):s()},removeTreeNode:function(){var t=this.treeGId;d3.select("#"+t).selectAll(".lineartree-node").remove()},renderTreeNode:function(t){var e=this,a=e.treeGId,n=d3.select("#"+a).selectAll(".lineartree-node").data(t,function(t,e){return t.id});n.enter().append("path").attr("class","lineartree-node").attr("id",function(t,e){return"rootnode"+t.id}).attr("d",function(t,e){return t.element}).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1);var i=[],r=[],o=[];n.each(function(t,a){var n=t.element,s=d3.select(this).attr("d");o.push(d3.select(this).node()),i.push(s),r.push(n),d3.select(this).transition().duration(e.DURATION).attr("fill",function(t){return t.node_color}).style("stroke-width",e.NodeStrokeWidth).style("opacity",1)}),Object(_["tweenPaths"])({duration:e.DURATION,complete:s,from:i,to:r,next:function(t,e){return o[e].setAttribute("d",t)}});var s=function(){n.each(function(t,e){var a=t.element;d3.select(this).attr("d",a)})};n.exit().remove()}})},Ye=He,Xe=(a("f665"),a("2686"),Object(j["a"])(Ye,Ie,Ue,!1,null,"34a8e95b",null)),Be=Xe.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"treedsl-parameter"},[!1!==this.rootLayoutComponent?a("el-divider",{attrs:{"content-position":"left"}},[t._v("Root-Subtree")]):t._e(),!1!==this.rootLayoutComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"root_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("layout-sketch-figure",{attrs:{category:"root",layout:"X "+t.Layout.X.Root.Relation+" | Y "+t.Layout.Y.Root.Relation}})],1),a("el-col",{attrs:{span:18}},[a("el-divider",{attrs:{"content-position":"right"}},[t._v(t._s("x - "+t.Layout.X.Root.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["include"===t.Layout.X.Root.Relation?a("include-para",{attrs:{axisDsl:t.Layout.X.Root,axis:"X",changeDSL:t.changeDSL}}):t._e(),"juxtapose"===t.Layout.X.Root.Relation?a("juxtapose-para",{attrs:{axisDsl:t.Layout.X.Root,axis:"X",changeDSL:t.changeDSL}}):t._e(),"within"===t.Layout.X.Root.Relation?a("within-para",{attrs:{axisDsl:t.Layout.X.Root,axis:"X",changeDSL:t.changeDSL}}):t._e()],1)],1),a("el-divider",{attrs:{"content-position":"right"}},[t._v(t._s("y - "+t.Layout.Y.Root.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["include"===t.Layout.Y.Root.Relation?a("include-para",{attrs:{axisDsl:t.Layout.Y.Root,axis:"Y",changeDSL:t.changeDSL}}):t._e(),"juxtapose"===t.Layout.Y.Root.Relation?a("juxtapose-para",{attrs:{axisDsl:t.Layout.Y.Root,axis:"Y",changeDSL:t.changeDSL}}):t._e(),"within"===t.Layout.Y.Root.Relation?a("within-para",{attrs:{axisDsl:t.Layout.Y.Root,axis:"Y",changeDSL:t.changeDSL}}):t._e()],1)],1)],1)],1):t._e(),!1!==this.subtreeLayoutComponent?a("el-divider",{attrs:{"content-position":"left"}},[t._v("Subtrees")]):t._e(),!1!==this.subtreeLayoutComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"subtree_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("layout-sketch-figure",{attrs:{category:"subtree",layout:"X "+t.Layout.X.Subtree.Relation+" | Y "+t.Layout.Y.Subtree.Relation}})],1),a("el-col",{attrs:{span:18}},[a("el-divider",{attrs:{"content-position":"right"}},[t._v(t._s("x - "+t.Layout.X.Subtree.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["align"===t.Layout.X.Subtree.Relation?a("align-para",{attrs:{axisDsl:t.Layout.X.Subtree,axis:"X",changeDSL:t.changeDSL}}):t._e(),"flatten"===t.Layout.X.Subtree.Relation?a("flatten-para",{attrs:{axisDsl:t.Layout.X.Subtree,axis:"X",changeDSL:t.changeDSL}}):t._e()],1)],1),a("el-divider",{attrs:{"content-position":"right"}},[t._v(t._s("y - "+t.Layout.Y.Subtree.Relation))]),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},["align"===t.Layout.Y.Subtree.Relation?a("align-para",{attrs:{axisDsl:t.Layout.Y.Subtree,axis:"Y",changeDSL:t.changeDSL}}):t._e(),"flatten"===t.Layout.Y.Subtree.Relation?a("flatten-para",{attrs:{axisDsl:t.Layout.Y.Subtree,axis:"Y",changeDSL:t.changeDSL}}):t._e()],1)],1)],1)],1):t._e(),!1!==this.nodeComponent?a("el-divider",{attrs:{"content-position":"left"}},[t._v("Node")]):t._e(),!1!==this.nodeComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"node_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("element-sketch-figure",{attrs:{category:"node",elementType:t.Element.Node}})],1),a("el-col",{attrs:{span:18}},["rectangle"===t.Element.Node?a("rect-para",{attrs:{elementDsl:t.Element,valueList:t.valueList,changeDSL:t.changeDSL}}):t._e(),"circle"===t.Element.Node?a("circle-para",{attrs:{elementDsl:t.Element,valueList:t.valueList,changeDSL:t.changeDSL}}):t._e(),"triangle"===t.Element.Node?a("triangle-para",{attrs:{elementDsl:t.Element,valueList:t.valueList,changeDSL:t.changeDSL}}):t._e(),"ellipse"===t.Element.Node?a("ellipse-para",{attrs:{elementDsl:t.Element,valueList:t.valueList,changeDSL:t.changeDSL}}):t._e()],1)],1):t._e(),!1!==this.linkComponent?a("el-divider",{attrs:{"content-position":"left"}},[t._v("Link")]):t._e(),!1!==this.linkComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"link_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("element-sketch-figure",{attrs:{category:"link",elementType:t.Element.Link}})],1),a("el-col",{attrs:{span:18}},[a("link-para",{attrs:{elementDsl:t.Element,changeDSL:t.changeDSL,valueList:t.valueList}})],1)],1):t._e(),!1!==this.coordComponent?a("el-divider",{attrs:{"content-position":"left"}},[t._v("Coordinate System")]):t._e(),!1!==this.coordComponent?a("el-row",{attrs:{type:"flex",align:"middle",id:"coord_panel",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_img",attrs:{span:5}},[a("coord-sketch-figure",{attrs:{coordType:t.CoordinateSystem.Category}})],1),a("el-col",{attrs:{span:18}},["polar"===t.CoordinateSystem.Category?a("polar-para",{attrs:{CoordDsl:t.CoordinateSystem,changeDSL:t.changeDSL}}):t._e(),"triangle"===t.CoordinateSystem.Category?a("tri-coord-para",{attrs:{CoordDsl:t.CoordinateSystem,changeDSL:t.changeDSL}}):t._e(),"cartesian"===t.CoordinateSystem.Category?a("span",[t._v("no parameter")]):t._e()],1)],1):t._e(),!1!==this.coordComponent||!1!==this.rootLayoutComponent||!1!==this.subtreeLayoutComponent||!1!==this.nodeComponent||!1!==this.linkComponent?a("div",{staticClass:"component-divider"}):t._e()],1)},Fe=[],Ge=a("bd86"),Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v(t._s("X"===t.axis?"padding-left ":"padding-top "))])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:t.changeDSL_},model:{value:t.leftPadding,callback:function(e){t.leftPadding=e},expression:"leftPadding"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v(t._s("X"===t.axis?"padding-right ":"padding-bottom "))])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:t.changeDSL_},model:{value:t.rightPadding,callback:function(e){t.rightPadding=e},expression:"rightPadding"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},Ke=[],Ze={name:"include-para",props:{axisDsl:Object,axis:String,changeDSL:Function},data:function(){return{units:["","h","w"],leftPadding:0,rightPadding:0}},created:function(){"Padding"in this.axisDsl?(this.leftPadding=Math.floor(100*this.axisDsl.Padding[0]),this.rightPadding=Math.floor(100*this.axisDsl.Padding[1])):this.axisDsl.Padding=[0,0]},methods:{changeDSL_:function(){this.axisDsl.Padding[0]=this.leftPadding/100,this.axisDsl.Padding[1]=this.rightPadding/100,this.changeDSL()}}},Qe=Ze,qe=(a("6526"),Object(j["a"])(Qe,Je,Ke,!1,null,"1f9be7ec",null)),ta=qe.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("position")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.selectedPosition,callback:function(e){t.selectedPosition=e},expression:"selectedPosition"}},[a("el-radio-button",{attrs:{label:"X"===t.axis?"left":"top"}}),a("el-radio-button",{attrs:{label:"X"===t.axis?"right":"bottom"}})],1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("margin")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:t.changeDSL_},model:{value:t.Margin,callback:function(e){t.Margin=e},expression:"Margin"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},aa=[],na={name:"juxtapose-para",props:{axisDsl:Object,axis:String,changeDSL:Function},data:function(){return{selectedPosition:"",Margin:0}},mounted:function(){"Margin"in this.axisDsl?this.Margin=Math.floor(100*this.axisDsl.Margin):this.axisDsl.Margin=0,"Position"in this.axisDsl?this.selectedPosition=this.axisDsl.Position:(this.axisDsl.Position="X"===this.axis?"left":"top",this.selectedPosition="X"===this.axis?"left":"top")},methods:{changeDSL_:function(){this.axisDsl.Position=this.selectedPosition,this.axisDsl.Margin=this.Margin/100,this.changeDSL()}}},ia=na,ra=(a("9509"),Object(j["a"])(ia,ea,aa,!1,null,"37682a95",null)),oa=ra.exports,sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"within"},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("alignment")])]),a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){t.selectAlignment()}},model:{value:t.selectedPara,callback:function(e){t.selectedPara=e},expression:"selectedPara"}},[a("el-radio-button",{attrs:{label:t.label[t.axis][0]}}),a("el-radio-button",{attrs:{label:t.label[t.axis][1]}}),a("el-radio-button",{attrs:{label:t.label[t.axis][2]}})],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},la=[],ca={name:"within-para",props:{axisDsl:Object,axis:String,changeDSL:Function},data:function(){return{label:{X:["left","middle","right"],Y:["top","middle","bottom"]},selectedPara:""}},mounted:function(){"Alignment"in this.axisDsl?this.selectedPara=this.axisDsl.Alignment:(this.axisDsl.Alignment="middle",this.selectedPara="middle")},methods:{selectAlignment:function(t){this.axisDsl.Alignment=this.selectedPara,this.changeDSL()}}},da=ca,ua=(a("62c0"),a("3e59"),Object(j["a"])(da,sa,la,!1,null,"5f6aaa84",null)),ha=ua.exports,pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("alignment")])]),a("el-col",{attrs:{span:1}}),a("el-col",{attrs:{span:15}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){t.selectAlignment()}},model:{value:t.selectedPara,callback:function(e){t.selectedPara=e},expression:"selectedPara"}},[a("el-radio-button",{attrs:{label:t.label[t.axis][0]}}),a("el-radio-button",{attrs:{label:t.label[t.axis][1]}}),a("el-radio-button",{attrs:{label:t.label[t.axis][2]}})],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},fa=[],ga={name:"align-para",props:{axisDsl:Object,axis:String,changeDSL:Function},data:function(){return{label:{X:["left","middle","right"],Y:["top","middle","bottom"]},selectedPara:""}},mounted:function(){"Alignment"in this.axisDsl?this.selectedPara=this.axisDsl.Alignment:(this.axisDsl.Alignment="middle",this.selectedPara="middle")},methods:{selectAlignment:function(){this.axisDsl.Alignment=this.selectedPara,this.changeDSL()}}},ma=ga,va=(a("d138"),Object(j["a"])(ma,pa,fa,!1,null,"74918f85",null)),ya=va.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"outer-row",attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("margin")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-slider",{attrs:{min:-100},on:{input:t.changeDSL_},model:{value:t.Margin,callback:function(e){t.Margin=e},expression:"Margin"}})],1)],1)],1),a("el-col",{attrs:{span:1}})],1)],1)},Da=[],Sa={name:"flatten-para",props:{axisDsl:Object,axis:String,changeDSL:Function},data:function(){return{Margin:0}},mounted:function(){"Margin"in this.axisDsl?this.Margin=Math.floor(100*this.axisDsl.Margin):this.axisDsl.Margin=0},methods:{changeDSL_:function(){this.axisDsl.Margin=this.Margin/100,this.changeDSL()}}},La=Sa,xa=(a("a660"),a("0c02"),Object(j["a"])(La,ba,Da,!1,null,"5e0ccd8a",null)),Aa=xa.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"rectPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootWidth,callback:function(e){t.RootWidth=e},expression:"RootWidth"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootHeight,callback:function(e){t.RootHeight=e},expression:"RootHeight"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeColor},model:{value:t.colorIndex,callback:function(e){t.colorIndex=e},expression:"colorIndex"}},t._l(t.valueList,function(t,e){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:e}})}),1)],1),a("el-col",{attrs:{span:1}})],1),"number"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[0],callback:function(e){t.$set(t.elementDsl.ColorRange,0,e)},expression:"elementDsl.ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[1],callback:function(e){t.$set(t.elementDsl.ColorRange,1,e)},expression:"elementDsl.ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):t._e(),"string"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorSchem")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorSchema,callback:function(e){t.$set(t.elementDsl,"ColorSchema",e)},expression:"elementDsl.ColorSchema"}},t._l(t.colorSchemaList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1):t._e()],1)},Ca=[],Ta={name:"rect-para",props:{elementDsl:Object,valueList:Array,changeDSL:Function},data:function(){return{colorFlag:"default",colorIndex:0,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill"}},mounted:function(){},created:function(){"ColorRange"in this.elementDsl||(this.elementDsl.ColorRange=["",""]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl||(this.elementDsl.ColorSchema=this.colorSchemaList[0])},methods:{changeColor:function(t){var e=this.valueList[t];this.colorFlag=e.attrType,this.elementDsl.Color=e.attrName,this.elementDsl.ColorType=e.attrType,this.changeDSL()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.changeDSL()}}},Ra=Ta,Oa=(a("e289"),a("cd57"),Object(j["a"])(Ra,_a,Ca,!1,null,"37469202",null)),wa=Oa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"circlePara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootWidth,callback:function(e){t.RootWidth=e},expression:"RootWidth"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootHeight,callback:function(e){t.RootHeight=e},expression:"RootHeight"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("size")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.sizeOption,callback:function(e){t.sizeOption=e},expression:"sizeOption"}},t._l(t.sizeOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeColor},model:{value:t.colorIndex,callback:function(e){t.colorIndex=e},expression:"colorIndex"}},t._l(t.valueList,function(t,e){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:e}})}),1)],1),a("el-col",{attrs:{span:1}})],1),"number"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[0],callback:function(e){t.$set(t.elementDsl.ColorRange,0,e)},expression:"elementDsl.ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[1],callback:function(e){t.$set(t.elementDsl.ColorRange,1,e)},expression:"elementDsl.ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):t._e(),"string"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorSchem")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorSchema,callback:function(e){t.$set(t.elementDsl,"ColorSchema",e)},expression:"elementDsl.ColorSchema"}},t._l(t.colorSchemaList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1):t._e()],1)},ja=[],Pa={name:"circle-para",props:{elementDsl:Object,valueList:Array,changeDSL:Function},data:function(){return{colorFlag:"default",colorIndex:0,colorSchemaList:["option 1","option 2"],sizeOptions:["static","fill"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill"}},mounted:function(){},created:function(){"ColorRange"in this.elementDsl||(this.elementDsl.ColorRange=["",""]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","sizeOption"in this.elementDsl?this.sizeOption=this.elementDsl.sizeOption:this.elementDsl.sizeOption="fill","ColorSchema"in this.elementDsl||(this.elementDsl.ColorSchema=this.colorSchemaList[0])},methods:{changeColor:function(t){var e=this.valueList[t];this.colorFlag=e.attrType,this.elementDsl.Color=e.attrName,this.elementDsl.ColorType=e.attrType,this.changeDSL()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.elementDsl.sizeOption=this.sizeOption,this.changeDSL()}}},Na=Pa,ka=(a("1845"),a("acdc"),Object(j["a"])(Na,Ea,ja,!1,null,"6b5d251a",null)),Ia=ka.exports,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"triPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootWidth,callback:function(e){t.RootWidth=e},expression:"RootWidth"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootHeight,callback:function(e){t.RootHeight=e},expression:"RootHeight"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeColor},model:{value:t.colorIndex,callback:function(e){t.colorIndex=e},expression:"colorIndex"}},t._l(t.valueList,function(t,e){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:e}})}),1)],1),a("el-col",{attrs:{span:1}})],1),"number"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[0],callback:function(e){t.$set(t.elementDsl.ColorRange,0,e)},expression:"elementDsl.ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[1],callback:function(e){t.$set(t.elementDsl.ColorRange,1,e)},expression:"elementDsl.ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):t._e(),"string"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorSchem")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorSchema,callback:function(e){t.$set(t.elementDsl,"ColorSchema",e)},expression:"elementDsl.ColorSchema"}},t._l(t.colorSchemaList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1):t._e()],1)},Wa=[],$a={name:"tri-para",props:{elementDsl:Object,valueList:Array,changeDSL:Function},data:function(){return{colorFlag:"default",colorIndex:0,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill"}},mounted:function(){},created:function(){"ColorRange"in this.elementDsl||(this.elementDsl.ColorRange=["",""]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl||(this.elementDsl.ColorSchema=this.colorSchemaList[0])},methods:{changeColor:function(t){var e=this.valueList[t];this.colorFlag=e.attrType,this.elementDsl.Color=e.attrName,this.elementDsl.ColorType=e.attrType,this.changeDSL()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.changeDSL()}}},Ma=$a,Va=(a("3aec"),a("8fe2"),Object(j["a"])(Ma,Ua,Wa,!1,null,"6ce7b4cb",null)),Ha=Va.exports,Ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ellipsePara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("width")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootWidth,callback:function(e){t.RootWidth=e},expression:"RootWidth"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("height")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.RootHeight,callback:function(e){t.RootHeight=e},expression:"RootHeight"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("color")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeColor},model:{value:t.colorIndex,callback:function(e){t.colorIndex=e},expression:"colorIndex"}},t._l(t.valueList,function(t,e){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:e}})}),1)],1),a("el-col",{attrs:{span:1}})],1),"number"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorRange")])]),a("el-col",{attrs:{span:2}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[0],callback:function(e){t.$set(t.elementDsl.ColorRange,0,e)},expression:"elementDsl.ColorRange[0]"}})],1),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:4}},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorRange[1],callback:function(e){t.$set(t.elementDsl.ColorRange,1,e)},expression:"elementDsl.ColorRange[1]"}})],1),a("el-col",{attrs:{span:4}})],1):t._e(),"string"===t.colorFlag?a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("colorSchem")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.elementDsl.ColorSchema,callback:function(e){t.$set(t.elementDsl,"ColorSchema",e)},expression:"elementDsl.ColorSchema"}},t._l(t.colorSchemaList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1):t._e()],1)},Xa=[],Ba={name:"ellipse-para",props:{elementDsl:Object,valueList:Array,changeDSL:Function},data:function(){return{colorFlag:"default",colorIndex:0,colorSchemaList:["option 1","option 2"],RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill"}},mounted:function(){},created:function(){"ColorRange"in this.elementDsl||(this.elementDsl.ColorRange=["",""]),"RootWidth"in this.elementDsl?this.RootWidth=this.elementDsl.RootWidth:this.elementDsl.RootWidth="adaptive","RootHeight"in this.elementDsl?this.RootHeight=this.elementDsl.RootHeight:this.elementDsl.RootHeight="adaptive","ColorSchema"in this.elementDsl||(this.elementDsl.ColorSchema=this.colorSchemaList[0])},methods:{changeColor:function(t){var e=this.valueList[t];this.colorFlag=e.attrType,this.elementDsl.Color=e.attrName,this.elementDsl.ColorType=e.attrType,this.changeDSL()},changeDSL_:function(){this.elementDsl.RootWidth=this.RootWidth,this.elementDsl.RootHeight=this.RootHeight,this.changeDSL()}}},za=Ba,Fa=(a("93b2"),a("3e2e"),Object(j["a"])(za,Ya,Xa,!1,null,"cc97813e",null)),Ga=Fa.exports,Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"linkPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("thickness")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL_},model:{value:t.Thickness,callback:function(e){t.Thickness=e},expression:"Thickness"}},t._l(t.valueList,function(t){return a("el-option",{key:t.attrName,attrs:{label:t.attrName,value:t.attrName}})}),1)],1),a("el-col",{attrs:{span:1}})],1)],1)},Ka=[],Za={name:"link-para",props:{elementDsl:Object,changeDSL:Function,valueList:Array},data:function(){return{options:["adaptive","height","width","depth","rdepth","value"],Thickness:"adaptive"}},mounted:function(){},created:function(){"Thickness"in this.elementDsl?this.Thickness=this.elementDsl.Thickness:this.elementDsl.Thickness=this.options[0]},methods:{changeDSL_:function(){this.elementDsl.Thickness=this.Thickness,this.changeDSL()}}},Qa=Za,qa=(a("f7d4"),Object(j["a"])(Qa,Ja,Ka,!1,null,"20a7c53a",null)),tn=qa.exports,en=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"polarPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("initial")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Initial,callback:function(e){t.Initial=e},expression:"Initial"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("theta")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Theta,callback:function(e){t.Theta=e},expression:"Theta"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("inner")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Inner,callback:function(e){t.Inner=e},expression:"Inner"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("direction")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.CoordDsl.Direction,callback:function(e){t.$set(t.CoordDsl,"Direction",e)},expression:"CoordDsl.Direction"}},t._l(t.DirectionOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("polar-axis")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.CoordDsl.PolarAxis,callback:function(e){t.$set(t.CoordDsl,"PolarAxis",e)},expression:"CoordDsl.PolarAxis"}},t._l(t.PolarAxisOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1)],1)},an=[],nn={name:"polar-para",props:{CoordDsl:Object,changeDSL:Function},data:function(){return{DirectionOptions:["CW","CWW"],PolarAxisOptions:["y-axis","x-axis"],Theta:100,Initial:0,Inner:0}},mounted:function(){},created:function(){"Direction"in this.CoordDsl||(this.CoordDsl.Direction=this.DirectionOptions[0]),"Theta"in this.CoordDsl||(this.CoordDsl.Theta=1),"PolarAxis"in this.CoordDsl||(this.CoordDsl.PolarAxis=this.PolarAxisOptions[0]),this.Theta=Math.floor(100*this.CoordDsl.Theta),this.Initial=Math.floor(100*this.CoordDsl.Initial),this.Inner=Math.floor(100*this.CoordDsl.Inner)},methods:{changeDSL_:function(){this.CoordDsl.Theta=this.Theta/100,this.CoordDsl.Initial=this.Initial/100,this.CoordDsl.Inner=this.Inner/100,this.changeDSL()}}},rn=nn,on=(a("0b41"),a("338d"),Object(j["a"])(rn,en,an,!1,null,"c0c86a4e",null)),sn=on.exports,ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"triCoordPara"}},[a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("initial")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Initial,callback:function(e){t.Initial=e},expression:"Initial"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("theta")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Theta,callback:function(e){t.Theta=e},expression:"Theta"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("inner")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-slider",{on:{input:t.changeDSL_},model:{value:t.Inner,callback:function(e){t.Inner=e},expression:"Inner"}})],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("direction")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.CoordDsl.Direction,callback:function(e){t.$set(t.CoordDsl,"Direction",e)},expression:"CoordDsl.Direction"}},t._l(t.DirectionOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1),a("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_para",attrs:{span:6}},[a("span",[t._v("polar-axis")])]),a("el-col",{attrs:{span:1}}),a("el-col",{staticClass:"panel_control",attrs:{span:15}},[a("el-select",{attrs:{size:"mini"},on:{change:t.changeDSL},model:{value:t.CoordDsl.PolarAxis,callback:function(e){t.$set(t.CoordDsl,"PolarAxis",e)},expression:"CoordDsl.PolarAxis"}},t._l(t.PolarAxisOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-col",{attrs:{span:1}})],1)],1)},cn=[],dn={name:"tri-coord-para",props:{CoordDsl:Object,changeDSL:Function},data:function(){return{DirectionOptions:["CW","CWW"],PolarAxisOptions:["y-axis","x-axis"],Theta:100,Initial:0,Inner:0}},mounted:function(){},created:function(){"Direction"in this.CoordDsl||(this.CoordDsl.Direction=this.DirectionOptions[0]),"Theta"in this.CoordDsl||(this.CoordDsl.Theta=1),"PolarAxis"in this.CoordDsl||(this.CoordDsl.PolarAxis=this.PolarAxisOptions[0]),this.Theta=Math.floor(100*this.CoordDsl.Theta),this.Initial=Math.floor(100*this.CoordDsl.Initial),this.Inner=Math.floor(100*this.CoordDsl.Inner)},methods:{changeDSL_:function(){this.CoordDsl.Theta=this.Theta/100,this.CoordDsl.Initial=this.Initial/100,this.CoordDsl.Inner=this.Inner/100,this.changeDSL()}}},un=dn,hn=(a("e7d6"),a("c18b"),Object(j["a"])(un,ln,cn,!1,null,"16fac712",null)),pn=hn.exports,fn=(Ve={name:"ParameterView",components:{IncludePara:ta,JuxtaposePara:oa,WithinPara:ha,AlignPara:ya,FlattenPara:Aa,RectPara:wa,CirclePara:Ia,TrianglePara:Ha,EllipsePara:Ga,LinkPara:tn,PolarPara:sn,TriCoordPara:pn,ElementSketchFigure:Qt,CoordSketchFigure:Rt,LayoutSketchFigure:Mt},data:function(){return{valueList:[],Element:{Node:"",RootWidth:"adaptive",RootHeight:"adaptive",sizeOption:"fill",Color:"adaptive",ColorType:"default",ColorRange:["",""],ColorSchema:"",Link:"",Thickness:"adaptive"},CoordinateSystem:{Category:"",Theta:0,Initial:0,Direction:"CW",Inner:0,PolarAxis:"y-axis"},Layout:{Category:"AxisIndependent",Mode:"bottom-up",X:{Root:{Relation:"",Padding:[0,0],Padding_:["",""],Margin:0,Margin_:"",Position:"left",Alignment:"middle"},Subtree:{Relation:"",SortingCriteria:"",SortingOrder:"",Margin:0,Margin_:"",Alignment:"middle"}},Y:{Root:{Relation:"",Padding:[0,0],Padding_:["",""],Margin:0,Margin_:"",Position:"top",Alignment:"middle"},Subtree:{Relation:"",SortingCriteria:"",SortingOrder:"",Margin:0,Margin_:"",Alignment:"middle"}}},relationDic:{"x-include-y-within":["include","within"],"x-juxtapose-y-within":["juxtapose","within"],"x-within-y-within":["within","within"],"x-include-y-juxtapose":["include","juxtapose"],"x-juxtapose-y-juxtapose":["juxtapose","juxtapose"],"x-within-y-juxtapose":["within","juxtapose"],"x-include-y-include":["include","include"],"x-juxtapose-y-include":["juxtapose","include"],"x-within-y-include":["within","include"],"x-align-y-flatten":["align","flatten"],"x-flatten-y-flatten":["flatten","flatten"],"x-align-y-align":["align","align"],"x-flatten-y-align":["flatten","align"]}}},props:{dslName:{type:String},dslObj:{type:Object}},watch:{attrObjArray:function(){var t=this;this.valueList=[{attrName:"adaptive",attrType:"default"}],this.attrObjArray.forEach(function(e){t.valueList.push(Object(l["a"])({},e))})}},created:function(){},beforeMount:function(){},mounted:function(){console.log("this.dslObj",this.dslObj)}},Object(Ge["a"])(Ve,"created",function(){var t=this;this.valueList=[{attrName:"adaptive",attrType:"default"}],this.attrObjArray.forEach(function(e){t.valueList.push(Object(l["a"])({},e))})}),Object(Ge["a"])(Ve,"computed",Object(l["a"])({},Object(f["d"])(["attrObjArray"]),{rootLayoutComponent:function(){return"Layout"in this.dslObj&&"X"in this.dslObj.Layout&&"Root"in this.dslObj.Layout.X&&(this.Layout=this.dslObj.Layout,!0)},subtreeLayoutComponent:function(){return"Layout"in this.dslObj&&"X"in this.dslObj.Layout&&"Subtree"in this.dslObj.Layout.X&&(this.Layout=this.dslObj.Layout,!0)},nodeComponent:function(){return"Element"in this.dslObj&&"Node"in this.dslObj.Element&&(this.Element=this.dslObj.Element,!0)},linkComponent:function(){return"Element"in this.dslObj&&"Link"in this.dslObj.Element&&(this.Element=this.dslObj.Element,!0)},coordComponent:function(){return"CoordinateSystem"in this.dslObj&&(this.CoordinateSystem=this.dslObj.CoordinateSystem,!0)}})),Object(Ge["a"])(Ve,"methods",Object(l["a"])({},Object(f["b"])(["updateTreeUnitLayout"]),Object(f["c"])(["UPDATE_TREE_UNIT_LAYOUT_STATE"]),{changeDSL:function(){if(!1!==this.rootLayoutComponent&&!1!==this.subtreeLayoutComponent&&!1!==this.nodeComponent&&!1!==this.linkComponent&&!1!==this.coordComponent)Object(l["a"])({},this.Element),Object(l["a"])({},this.CoordinateSystem),Object(l["a"])({},this.Layout);console.log("changeDSL"),this.UPDATE_TREE_UNIT_LAYOUT_STATE()}})),Ve),gn=fn,mn=(a("6cda"),a("39d1"),Object(j["a"])(gn,ze,Fe,!1,null,"bd512144",null)),vn=mn.exports,yn={name:"TreeUnitParameterView",components:{TreeUnitView:Be,ParameterView:vn},data:function(){return{topPanelStyleObj:null,bottomPanelStyleObj:null,editableDSLName:0}},watch:{treeUnitDSLArray:{handler:function(){console.log("treeUnitDSLArray",this.treeUnitDSLArray)},deep:!0},treeUnitDSLName:function(){var t=this,e=this.treeUnitDSLName;console.log("update treeUnitDSLName",e),null!=e&&"undefined"!==typeof e&&(console.log("inner update treeUnitDSLName",e),t.selectCurrentTreeUnitDSL(e))}},created:function(){},beforeMount:function(){},mounted:function(){this.initializePanelAttr()},computed:Object(l["a"])({},Object(f["d"])(["treeUnitDSLArray","treeUnitDSLName"])),methods:Object(l["a"])({removeTab:function(t){var e=this.treeUnitDSLArray,a=this.editableDSLName;a===t&&(e.forEach(function(n,i){if(n.name===t){var r=e[i+1]||e[i-1];r&&(a=r.name)}}),a===t&&(a=null)),this.editableDSLName=a,this.UPDATE_TREEUNIT_DSL_NAME(a);var n=e.filter(function(e){return e.name!==t});this.UPDATE_TREEUNIT_DSL_ARRAY(n)},selectCurrentTreeUnitDSL:function(t){var e=this.treeUnitDSLArray;this.editableDSLName=t;for(var a=0;a<e.length;a++)e[a].name===t&&this.handleClick({index:a})},handleClick:function(t,e){console.log("tab",t,"event",e);for(var a=t.index,n=0;n<this.treeUnitDSLArray.length;n++)this.treeUnitDSLArray[n].visible=!1;this.treeUnitDSLArray[a].visible=!0,this.$forceUpdate(),console.log("treeUnitDSLArray",JSON.parse(p()(this.treeUnitDSLArray)))},initializePanelAttr:function(){var t=$("#treeunit-parameter-container").width(),e=.9*t;this.topPanelStyleObj={height:e+"px"},this.bottomPanelStyleObj={top:e+"px"}}},Object(f["c"])(["UPDATE_TREEUNIT_DSL_ARRAY","UPDATE_TREEUNIT_DSL_NAME"]))},bn=yn,Dn=(a("029a"),a("04c2"),Object(j["a"])(bn,Ne,ke,!1,null,"785e8f4f",null)),Sn=Dn.exports,Ln=a("ba5a"),xn={name:"app",components:{TreeUnitViewParameterTitle:Pe,TreeCanvas:H,TreeCanvasViewTitle:K,DslList:Se,DslListTitle:Te,TreeUnitParameterView:Sn,DataDialog:at,ExportDialog:dt,TreedslDialog:Dt,OriginalDataView:N,CoordinateSystem:jt,Layout:Xt,Element:ae},data:function(){return{treeCanvasParas:{title:"TreeCanvas"},leftPanelWidth:0,treeDataArray:[],initTreeDataName:null,activeIndex:null,operationArray:["data","treedsl","export"],componentKey:0,dataDialogVisible:!1,treedslDialogVisible:!1,exportDialogVisible:!1,loading:!0,OPEN_PREVIEW_PANEL_DURATION:1e3,treeCanvasKey:0}},created:function(){},beforeMount:function(){var t=this,e=pt();this.treeDataArray=e.treeDataArray;var a=e.initTreeDataName;this.initTreeDataName=a,window.sysDatasetObj=new ft;var n=$.Deferred(),i=$.Deferred(),r=$.Deferred();$.when(n,i,r).then(function(){t.loading=!1});var o="treeunit.json";B(o).then(function(e){sysDatasetObj.updateTreeUnitDataset(e),t.UPDATE_PREVIEW_TREE_OBJ(e),r.resolve()}),B(a).then(function(e){t.updateSelectedHierarchicalData(a,e),n.resolve()});var s=e.selectedDSLArray;this.UPDATE_SELECTED_DSL_ARRAY(s),gt(s).then(function(t){for(var e in t){var a=t[e];sysDatasetObj.updateSelectedDSLObject(e,a),i.resolve()}})},mounted:function(){this.initializeLSCG()},computed:Object(l["a"])({},Object(f["d"])(["treeViewUpdate","currentTree","treeDataViewFormat","treeDslOption","appName","previewTreeObj","selectedPreviewNodeId"])),methods:Object(l["a"])({onHide:function(){},iconClass:function(t){return"icon-"+t},onShow:function(){},closeDataView:function(){var t=this,e=t.OPEN_PREVIEW_PANEL_DURATION,a=$("#original-data-view").width();$("#treecanvas-content-view").animate({left:"-="+a},e,function(){t.treeCanvasKey=(t.treeCanvasKey+1)%2})},openDataView:function(){var t=this,e=t.OPEN_PREVIEW_PANEL_DURATION,a=$("#original-data-view").width();$("#treecanvas-content-view").animate({left:"+="+a},e,function(){t.treeCanvasKey=(t.treeCanvasKey+1)%2})},updateSelectedTreeDateName:function(t){var e=this;B(t).then(function(a){e.updateSelectedHierarchicalData(t,a)})},updateSelectedHierarchicalData:function(t,e){var a=this;sysDatasetObj.updateDataset(e);var n=sysDatasetObj.getAllTreeObjIdArray();a.extractAttrArray(e),a.UPDATE_FOCUS_TREE_OBJ_ARRAY(n),a.UPDATE_SELECTED_DATASET(t),console.log("this.previewTreeObj",this.previewTreeObj),null!==a.selectedPreviewNodeId&&a.UPDATE_PREVIEW_TREE_OBJ(sysDatasetObj.findSelectedObjectById(a.selectedPreviewNodeId)),a.updateLayoutParas();var i=sysDatasetObj.getLayoutParas();a.getLayoutValue(i).then(function(t){a.UPDATE_LAYOUTS(t)})},updateLayoutParas:function(){var t=sysDatasetObj.getLayoutParas(),e=t.treeIndexWithDSL,a=t.treeDSLContentObj;if("undefined"!==typeof e&&"undefined"!==typeof a){for(var n=e["index-0"],i=sysDatasetObj.getAllTreeObjIdArray(),r=0;r<i.length;r++){var o=i[r];"undefined"===typeof e[o]&&(e[o]=n)}for(var s in e)-1===i.indexOf(s)&&delete e[s]}},initializeLSCG:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ln["initialize"]().then(function(){console.log("lscg-solver initialize")});case 2:window.lscgSolver=Ln,console.log("lscgSolver",Ln);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),navbarSelectPanel:function(t){"data"===t?this.dataDialogVisible=!0:"treedsl"===t?this.treedslDialogVisible=!0:"export"===t&&(this.exportDialogVisible=!0)},extractAttrArray:function(t){var e=[{attrName:"depth",attrType:"number"},{attrName:"height",attrType:"number"}];for(var a in t)if("children"!==a&&"index"!==a){var n=t[a],i=Object(o["a"])(n);e.push({attrName:a,attrType:i})}this.UPDATE_ATTR_OBJ_ARRAY(e)}},Object(f["b"])(["getLayoutValue"]),Object(f["c"])(["UPDATE_SELECTED_DATASET","UPDATE_SELECTED_DSL_ARRAY","UPDATE_ATTR_OBJ_ARRAY","UPDATE_FOCUS_TREE_OBJ_ARRAY","UPDATE_PREVIEW_TREE_OBJ","UPDATE_LAYOUTS","UPDATE_HIERARCHICAL_DATA","UPDATE_NODE_ARRAY","UPDATE_HIERARCHICAL_DSL","UPDATE_TREE_DSL_OPTION","UPDATA_DRAWER_VIEW_SELECTION_STATE"]))},An=xn,_n=(a("7c55"),a("a719"),Object(j["a"])(An,i,r,!1,null,"e9569142",null)),Cn=_n.exports,Tn=a("bc3a"),Rn=a.n(Tn);function On(t){"children"in t?t.children.forEach(function(t){On(t)}):t.children=[]}var wn=function(t){for(var e in t){var a=t[e],n=JSON.parse(p()(a));"Element"in n||(n.Element={}),"RootWidth"in n.Element||(n.Element.RootWidth="adaptive"),"RootHeight"in n.Element||(n.Element.RootHeight="adaptive"),"SubtreeWidth"in n.Layout||(n.Layout.SubtreeWidth="adaptive"),"SubtreeHeight"in n.Layout||(n.Layout.SubtreeHeight="adaptive"),"X"in n.Layout||(n.Layout.X={},n.Layout.Y={}),"Subtree"in n.Layout.X||(n.Layout.X.Subtree={Relation:"flatten"},n.Layout.Y.Subtree={Relation:"flatten"}),"Root"in n.Layout.X||(n.Layout.X.Root={Relation:"include"},n.Layout.Y.Root={Relation:"juxtapose"}),t[e]=n}},En=a("5176"),jn=a.n(En);function Pn(t){var e=t.index,a={},n=0;t.children.forEach(function(t){var e=Pn(t);jn()(a,e);var i=e[t.index];n=n<i?i:n});var i=n+1;return a[e]=i,a}function Nn(t,e){t.height=e[t.index],t.children.forEach(function(t){Nn(t,e)})}function kn(t){var e=t.index,a={},n=0;t.children.forEach(function(t){var e=kn(t);jn()(a,e);var i=e[t.index];n=i+n});var i=0===n?1:n;return a[e]=i,a}function In(t,e){t.width=e[t.index],t.children.forEach(function(t){In(t,e)})}function Un(t,e){var a={};return a[e.index]=t,e.children.forEach(function(e){var n=Un(t+1,e);jn()(a,n)}),a}function Wn(t,e,a){t.depth=e[t.index],t.rdepth=a+1-e[t.index],t.children.forEach(function(t){Wn(t,e,a)})}function $n(t,e,a){var n={},i=t.index,r=i in a?a[i]:a.default,o=e[r];return"AxisIndependent"===o.Layout.Category&&(n[i]={data:t,dsl:o}),t.children.forEach(function(t){jn()(n,$n(t,e,a))}),n}function Mn(t,e){var a=["adaptive","height","width","depth","rdepth"],n=0;n=a.indexOf(e.Element.RootWidth);var i=0===n?1:t[e.Element.RootWidth],r=-1===n;n=a.indexOf(e.Element.RootHeight);var o=0===n?1:t[e.Element.RootHeight],s=-1===n;return{width:i,height:o,widthWithValue:r,heightWithValue:s,id:t.index,root:{x:0,y:0,width:i,height:o},subtreeLayout:[],subtrees:{x:0,y:0,width:0,height:0}}}a("6c7b");var Vn=function(t,e,a,n,i){var r=[],o=e.children.length;if("include"===a.Root.Relation){if(r=Array(4*o+16).fill(0),r[4+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[4*o+10+t]=1,"Padding"in a.Root){var s=0;isNaN(a.Root.Padding[0])?(s=+a.Root.Padding[0].slice(0,-1),"h"===a.Root.Padding[0].slice(-1)?r[5]=-s:r[4]=-s):(s=+a.Root.Padding[0],r[0+t]=-s)}else r[0+t]=0;if(n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[4*o+14+t]=1,"Padding"in a.Root){var l=0;isNaN(a.Root.Padding[1])?(l=+a.Root.Padding[1].slice(0,-1),"h"===a.Root.Padding[1].slice(-1)?r[5]=-l:r[4]=-l):(l=+a.Root.Padding[1],r[0+t]=-l)}else r[0+t]=0;n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[0+t]=1,r[8+t]=-1,r[4*o+10+t]=-1,r[4*o+14+t]=-1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[2+t]=1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[2+t]=1,r[4*o+10+t]=1,r[6+t]=-1,n.A.push(r),n.B.push(0)}else{var c="adaptive"===i?1:e[i];r=Array(4*o+16).fill(0),r[4+t]=1,n.A.push(r),n.B.push(c)}if("within"===a.Root.Relation){var d=.5;"Alignment"in a.Root&&("left"!==a.Root.Alignment&&"top"!==a.Root.Alignment||(d=0),"right"!==a.Root.Alignment&&"bottom"!==a.Root.Alignment||(d=1)),r=Array(4*o+16).fill(0),r[2+t]=1,r[4+t]=d,r[0+t]=-d,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[6+t]=1,r[8+t]=d,r[0+t]=-d,n.A.push(r),n.B.push(0),"flatten"===a.Subtree.Relation&&(r=Array(4*o+16).fill(0),r[8+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[6+t]=1,n.A.push(r),n.B.push(0))}if("juxtapose"===a.Root.Relation){if(r=Array(4*o+16).fill(0),r[4*o+10+t]=1,"Margin"in a.Root){var u=0;isNaN(a.Root.Margin)?(u=+a.Root.Margin.slice(0,-1),"h"===a.Root.Margin.slice(-1)?r[5]=-u:r[4]=-u):(u=+a.Root.Margin,r[0+t]=-u)}else r[0+t]=0;n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[4+t]=1,r[4*o+10+t]=1,r[8+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0),"Position"in a.Root?"left"===a.Root.Position||"top"===a.Root.Position?(r=Array(4*o+16).fill(0),r[2+t]=1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[6+t]=1,r[8+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0)):(r=Array(4*o+16).fill(0),r[6+t]=1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[2+t]=1,r[4+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0)):(r=Array(4*o+16).fill(0),r[2+t]=1,n.A.push(r),n.B.push(0),r=Array(4*o+16).fill(0),r[6+t]=1,r[8+t]=1,r[0+t]=-1,n.A.push(r),n.B.push(0))}if("align"===a.Subtree.Relation){var h=.5;"Alignment"in a.Subtree&&("left"!==a.Subtree.Alignment&&"top"!==a.Subtree.Alignment||(h=0),"right"!==a.Subtree.Alignment&&"bottom"!==a.Subtree.Alignment||(h=1)),e.children.forEach(function(e,a){r=Array(4*o+16).fill(0),r[10+4*a+0+t]=1,r[10+4*a+2+t]=h,r[6+t]=-1,r[8+t]=-h,n.A.push(r),n.B.push(0)})}else{var p=!0;"SortingOrder"in a.Subtree&&(p="desc"!==a.Subtree.SortingOrder),"SortingCriteria"in a.Subtree?e.children.sort(function(t,e){return t[a.Subtree.SortingCriteria]<e[a.Subtree.SortingCriteria]^p}):e.children.sort(function(t,e){return t.index<e.index^p});var f=0,g=0;if("Margin"in a.Subtree&&(isNaN(a.Subtree.Margin)?(g=a.Subtree.Margin.slice(0,-1),"w"===a.Subtree.Margin.slice(-1)&&(r=Array(4*o+16).fill(0),r[4*o+12+t]=1,r[4]=-g,n.A.push(r),n.B.push(0),f=1),"h"===a.Subtree.Margin.slice(-1)&&(r=Array(4*o+16).fill(0),r[4*o+12+t]=1,r[5]=-g,n.A.push(r),n.B.push(0),f=1)):g=+a.Subtree.Margin),0===f){if(o>1){r=Array(4*o+16).fill(0);for(var m=0;m<o;m++)r[10+4*m+2+t]=1;r[8+t]=-1+g,n.A.push(r),n.B.push(0)}r=Array(4*o+16).fill(0),r[4*o+12+t]=1,r[8+t]=1===o?0:-g/(o-1),n.A.push(r),n.B.push(0)}e.children.forEach(function(e,a){0===a?(r=Array(4*o+16).fill(0),r[10+t]=1,r[6+t]=-1,n.A.push(r),n.B.push(0)):(r=Array(4*o+16).fill(0),r[10+4*a+0+t]=1,r[10+4*(a-1)+0+t]=-1,r[10+4*(a-1)+2+t]=-1,r[4*o+12+t]=-1,n.A.push(r),n.B.push(0))}),r=Array(4*o+16).fill(0),r[10+4*(o-1)+0+t]=1,r[10+4*(o-1)+2+t]=1,r[6+t]=-1,r[8+t]=-1,n.A.push(r),n.B.push(0)}},Hn=function(t,e,a){var n=["adaptive","height","width","depth","rdepth"],i=!0,r={A:[],B:[]},o=t.children.length,s=0,l=e.Layout.X;Vn(s,t,l,r,e.Element.RootWidth),s=1,l=e.Layout.Y,Vn(s,t,l,r,e.Element.RootHeight);var c=1,d=1,u=[];if(r.isCompatible={},r.widthWithValue=!1,r.heightWithValue=!1,"top-down"===e.Layout.Mode){var h=1;t.children.forEach(function(t,a){u=Array(4*o+16).fill(0),u[10+4*a+2]=1,r.A.push(u),i=n.indexOf(e.Layout.SubtreeWidth),i<0&&(r.widthWithValue=!0),h="adaptive"===e.Layout.SubtreeWidth?1:t[e.Layout.SubtreeWidth],c=c>h?c:h,r.B.push(h),u=Array(4*o+16).fill(0),u[10+4*a+3]=1,r.A.push(u),h=1,i=n.indexOf(e.Layout.SubtreeHeight),i<0&&(r.heightWithValue=!0),h="adaptive"===e.Layout.SubtreeHeight?1:t[e.Layout.SubtreeHeight],d=d>h?d:h,r.B.push(h)})}else{var p=!1,f=!1,g=!1,m=!1,v={},y={};if(t.children.forEach(function(t,e){t.index in a?(a[t.index].widthWithValue?(p=!0,v[e]=!0):(g=!0,v[e]=!1),a[t.index].heightWithValue?(f=!0,y[e]=!0):(m=!0,y[e]=!1)):(g=!0,m=!0,v[e]=!1,y[e]=!1)}),p)if(g){var b=0,D=0;t.children.forEach(function(t,e){if(!v[e]){u=Array(4*o+16).fill(0),u[10+4*e+2]=1,r.A.push(u);var n=t.index in a?a[t.index].width:1;b+=n,D+=1,c=c>n?c:n,r.B.push(n)}});var S=b/D;c=c>S?c:S,t.children.forEach(function(t,e){v[e]&&(r.isCompatible[t.index]=!0,u=Array(4*o+16).fill(0),u[10+4*e+2]=1,r.A.push(u),r.B.push(S))})}else r.widthWithValue=!0,t.children.forEach(function(t,e){u=Array(4*o+16).fill(0),u[10+4*e+2]=1,r.A.push(u);var n=t.index in a?a[t.index].width:1;c=c>n?c:n,r.B.push(n)});else t.children.forEach(function(t,e){u=Array(4*o+16).fill(0),u[10+4*e+2]=1,r.A.push(u);var n=t.index in a?a[t.index].width:1;c=c>n?c:n,r.B.push(n)});if(f)if(m){var L=0,x=0;t.children.forEach(function(t,e){if(!y[e]){u=Array(4*o+16).fill(0),u[10+4*e+3]=1,r.A.push(u);var n=t.index in a?a[t.index].height:1;L+=n,x+=1,d=d>n?d:n,r.B.push(n)}});var A=L/x;d=d>A?d:A,t.children.forEach(function(t,e){y[e]&&(r.isCompatible[t.index]=!0,u=Array(4*o+16).fill(0),u[10+4*e+3]=1,r.A.push(u),r.B.push(A))})}else r.heightWithValue=!0,t.children.forEach(function(t,e){u=Array(4*o+16).fill(0),u[10+4*e+3]=1,r.A.push(u);var n=t.index in a?a[t.index].height:1;d=d>n?d:n,r.B.push(n)});else t.children.forEach(function(t,e){u=Array(4*o+16).fill(0),u[10+4*e+3]=1,r.A.push(u);var n=t.index in a?a[t.index].height:1;d=d>n?d:n,r.B.push(n)})}if("within"===e.Layout.X.Root.Relation&&"align"===e.Layout.X.Subtree.Relation){var _="adaptive"===e.Element.RootWidth?1:t[e.Element.RootWidth];_=_>c?_:c,u=Array(4*o+16).fill(0),u[0]=1,r.A.push(u),r.B.push(_)}if("within"===e.Layout.Y.Root.Relation&&"align"===e.Layout.Y.Subtree.Relation){var C="adaptive"===e.Element.RootHeight?1:t[e.Element.RootHeight];C=C>d?C:d,u=Array(4*o+16).fill(0),u[1]=1,r.A.push(u),r.B.push(C)}return"align"===e.Layout.X.Subtree.Relation&&(u=Array(4*o+16).fill(0),u[8]=1,r.A.push(u),r.B.push(c)),"align"===e.Layout.Y.Subtree.Relation&&(u=Array(4*o+16).fill(0),u[9]=1,r.A.push(u),r.B.push(d)),r};function Yn(t,e,a){var n=t.length,i=t[0].length,r=new a.Matrix;r.init(n,i);var o=r.data();t.forEach(function(t,e){t.forEach(function(t,a){o[e+a*n]=t})});var s=new a.Matrix;s.init(n,1);var l=s.data();e.forEach(function(t,e){l[e]=t});var c=new a.Matrix,d=new a.Matrix;a.Matrix.SolveLinearSystem(d,c,r,s);for(var u=d.data(),h=[],p=0;p<u.length;p++)h.push(u[p]);return r.destroy(),s.destroy(),d.destroy(),c.destroy(),h}var Xn=function(t,e,a,n,i){for(var r=t.length,o=(r-16)/4,s=[],l=0;l<o;l++){var c=e.children[l].index;s.push({x:t[10+4*l+0],y:t[10+4*l+1],width:t[10+4*l+2],height:t[10+4*l+3],id:c,isCompatible:c in i})}var d=e.index,u={width:t[0],height:t[1],widthWithValue:a,heightWithValue:n,root:{x:t[2],y:t[3],width:t[4],height:t[5]},id:d,subtreeLayout:s,subtrees:{x:t[6],y:t[7],width:t[8],height:t[9]}};return u},Bn=function(t,e,a){var n=t.data,i=t.dsl,r=Hn(n,i,e),o=Yn(r.A,r.B,a),s=Xn(o,n,r.widthWithValue,r.heightWithValue,r.isCompatible);return s};function zn(t,e,a,n){var i=e[t];0===i.data.children.length?a[t]=Mn(i.data,i.dsl):"bottom-up"===i.dsl.Layout.Mode?(i.data.children.forEach(function(t){zn(t.index,e,a,n)}),a[t]=Bn(i,a,n)):(a[t]=Bn(i,a,n),i.data.children.forEach(function(t){zn(t.index,e,a,n)}))}var Fn,Gn=function(t,e,a,n){On(t),wn(e),Nn(t,Pn(t)),In(t,kn(t)),Wn(t,Un(1,t),t.height);var i=$n(t,e,a),r={};return 0!==i.length&&zn(t.index,i,r,n),r};function Jn(t){return t&&"object"===Object(o["a"])(t)&&!$e()(t)}function Kn(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];if(!a.length)return t;var i=a.shift();if(Jn(t)&&Jn(i))for(var r in i)Jn(i[r])?(t[r]||jn()(t,Object(Ge["a"])({},r,{})),Kn(t[r],i[r])):jn()(t,Object(Ge["a"])({},r,i[r]));return Kn.apply(void 0,[t].concat(a))}Rn.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",n["default"].use(f["a"]);var Zn=new f["a"].Store({state:{attrObjArray:[],previewTreeObj:{},selectedPreviewNodeId:null,viewSelectionMode:"Sibling",viewSelectionMode2:"Subtree",focusedTreeObjArray:[],selectedDataset:null,treeUnitDSLArray:[],treeUnitDSLName:null,selectedDSLArray:[],changedDSLNameState:0,treeCanvasLayoutState:0,treeUnitLayoutState:0,appName:"TreeExplorer",hierarchicalData:null,originalHierarchicalDataObj:null,nodeArray:[],originalNodeArray:[],hierarchicalDSL:{},focusedDSLObj:{},treeDSLArray:[],treeDSLArrayKey:0,hoveringDSLItem:null,treeViewUpdate:0,currentTree:"test",treeDSLViewFormat:"block",treeDataViewFormat:"tree",treeDataViewSetting:!1,dataDisplayMode:"tree",selectionMode:"Subtree",layouts:[],layoutParas:{},treeUnitLayout:[],partitionValue:0,partitionDataObjDic:{},drawerViewSelectionState:"template",focusedDSLObjIndex:0,dragComponentState:"DRAG-END",rootLayoutComponent:null,subtreeLayoutComponent:null,nodeComponent:null,linkComponent:null,coordComponent:null},mutations:(Fn={},Object(Ge["a"])(Fn,"UPDATE_ATTR_OBJ_ARRAY",function(t,e){t.attrObjArray=e}),Object(Ge["a"])(Fn,"UPDATE_VIEW_SELECTION_MODE",function(t,e){t.viewSelectionMode=e}),Object(Ge["a"])(Fn,"UPDATE_VIEW_SELECTION_MODE2",function(t,e){t.viewSelectionMode2=e}),Object(Ge["a"])(Fn,"UPDATE_PREVIEW_TREE_OBJ",function(t,e){t.previewTreeObj=e}),Object(Ge["a"])(Fn,"UPDATE_FOCUS_TREE_OBJ_ARRAY",function(t,e){t.focusedTreeObjArray=e}),Object(Ge["a"])(Fn,"UPDATE_SELECTED_PREVIEW_NODE_ID",function(t,e){t.selectedPreviewNodeId=e}),Object(Ge["a"])(Fn,"UPDATE_SELECTED_DATASET",function(t,e){t.selectedDataset=e}),Object(Ge["a"])(Fn,"UPDATE_TREEUNIT_DSL_ARRAY",function(t,e){t.treeUnitDSLArray=e}),Object(Ge["a"])(Fn,"UPDATE_TREEUNIT_DSL_NAME",function(t,e){t.treeUnitDSLName=e}),Object(Ge["a"])(Fn,"UPDATE_CHANGED_DSL_NAME_STATE",function(t,e){t.changedDSLNameState=(t.changedDSLNameState+1)%2}),Object(Ge["a"])(Fn,"UPDATE_TREE_CANVAS_LAYOUT_STATE",function(t,e){t.treeCanvasLayoutState=(t.treeCanvasLayoutState+1)%2}),Object(Ge["a"])(Fn,"UPDATE_TREE_UNIT_LAYOUT_STATE",function(t,e){t.treeUnitLayoutState=(t.treeUnitLayoutState+1)%2}),Object(Ge["a"])(Fn,"UPDATE_LAYOUTS",function(t,e){t.layouts=e}),Object(Ge["a"])(Fn,"UPDATE_TREE_UNIT_LAYOUTS",function(t,e){t.treeUnitLayout=e}),Object(Ge["a"])(Fn,"UPDATE_HIERARCHICAL_DATA",function(t,e){t.hierarchicalData=e}),Object(Ge["a"])(Fn,"UPDATE_SELECTED_DSL_ARRAY",function(t,e){t.selectedDSLArray=e}),Object(Ge["a"])(Fn,"UPDATE_ORIGINAL_HIERARCHICAL_DATA",function(t,e){t.originalHierarchicalDataObj=e}),Object(Ge["a"])(Fn,"UPDATE_NODE_ARRAY",function(t,e){t.nodeArray=e}),Object(Ge["a"])(Fn,"UPDATE_ORIGINAL_NODE_ARRAY",function(t,e){t.originalNodeArray=e}),Object(Ge["a"])(Fn,"UPDATE_HIERARCHICAL_DSL",function(t,e){t.hierarchicalDSL=e}),Object(Ge["a"])(Fn,"UPDATE_CURRENT_TREE",function(t,e){t.currentTree=e}),Object(Ge["a"])(Fn,"UPDATE_DSL_VIEW_FORMAT",function(t,e){t.treeDSLViewFormat=e}),Object(Ge["a"])(Fn,"UPDATE_DATA_VIEW_FORMAT",function(t,e){t.treeDataViewFormat=e}),Object(Ge["a"])(Fn,"UPDATE_DATA_VIEW_SETTING",function(t,e){t.treeDataViewSetting=e}),Object(Ge["a"])(Fn,"UPDATE_TREE_DSL_ARRAY",function(t,e){t.treeDSLArray=e}),Object(Ge["a"])(Fn,"UPDATE_TREE_DSL_ARRAY_KEY",function(t,e){t.treeDSLArrayKey=e}),Object(Ge["a"])(Fn,"UPDATE_DATA_DISPLAY_MODE",function(t,e){t.dataDisplayMode=e}),Object(Ge["a"])(Fn,"UPDATE_SELECTION_MODE",function(t,e){t.selectionMode=e}),Object(Ge["a"])(Fn,"UPDATE_HOVERING_DSL_ITEM",function(t,e){t.hoveringDSLItem=e}),Object(Ge["a"])(Fn,"UPDATE_FOCUSED_DSL_OBJ",function(t,e){t.focusedDSLObj=e}),Object(Ge["a"])(Fn,"UPDATE_LAYOUT_PARAS",function(t,e){t.layoutParas=e}),Object(Ge["a"])(Fn,"UPDATE_PARTITION_VALUE",function(t,e){t.partitionValue=e}),Object(Ge["a"])(Fn,"UPDATE_PARTITION_DATA_OBJ_DIC",function(t,e){t.partitionDataObjDic=e}),Object(Ge["a"])(Fn,"UPDATA_DRAWER_VIEW_SELECTION_STATE",function(t,e){t.drawerViewSelectionState=e}),Object(Ge["a"])(Fn,"UPDATE_FOCUSED_DSL_OBJ_INDEX",function(t,e){t.focusedDSLObjIndex=e}),Object(Ge["a"])(Fn,"UPDATE_DRAG_COMPONENT_STATE",function(t,e){t.dragComponentState=e}),Object(Ge["a"])(Fn,"UPDATE_ROOT_LAYOUT",function(t,e){t.rootLayoutComponent=e}),Object(Ge["a"])(Fn,"UPDATE_SUBTREE_LAYOUT",function(t,e){t.subtreeLayoutComponent=e}),Object(Ge["a"])(Fn,"UPDATE_NODE",function(t,e){t.nodeComponent=e}),Object(Ge["a"])(Fn,"UPDATE_LINK",function(t,e){t.linkComponent=e}),Object(Ge["a"])(Fn,"UPDATE_COORD",function(t,e){t.coordComponent=e}),Fn),actions:{getLayoutValue:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,a){var n,i,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.commit,e.state,(new Date).getTime(),n=a.hierarchicalData,i=a.treeDSLContentObj,r=a.treeIndexWithDSL,"undefined"===typeof n||"undefined"===typeof i||"undefined"===typeof r){t.next=9;break}return o=Gn(n,i,r,lscgSolver),t.abrupt("return",o);case 9:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),updateTreeDSL:function(t,e){t.commit;for(var a=t.state,n=e.treeDSLContent,i=e.editorId,r=0;r<a.treeDSLArray.length;r++)a.treeDSLArray[r].editorId===i&&(a.treeDSLArray[r].content=n)},updateTreeUnitLayout:function(t,e){var a=t.commit;a("UPDATE_TREE_UNIT_LAYOUTS",e)},setDSLComponent:function(t,e){var a=t.commit,n=t.state;if(0===n.treeUnitDSLArray.length){var i={name:"untitled0",dslObj:{Layout:{Category:"AxisIndependent",Mode:"bottom-up"}}};i.dslObj=Kn(i.dslObj,e),n.treeUnitDSLArray.push(i),n.treeUnitDSLArray=JSON.parse(p()(n.treeUnitDSLArray)),setTimeout(function(){if(n.treeUnitDSLArray.length>=1){var t=n.treeUnitDSLArray[0].name;a("UPDATE_TREEUNIT_DSL_NAME",t)}a("UPDATE_TREE_UNIT_LAYOUT_STATE")},200)}else{for(var r=0;r<n.treeUnitDSLArray.length;r++){var o=n.treeUnitDSLArray[r];if(o.name===n.treeUnitDSLName){var s=Kn(o.dslObj,e);o.dslObj=s}}n.treeUnitDSLArray=JSON.parse(p()(n.treeUnitDSLArray)),console.log("state.treeUnitDSLArray",n.treeUnitDSLArray),a("UPDATE_TREE_UNIT_LAYOUT_STATE")}},removeDSLComponent:function(t,e){var a=t.commit,n=t.state;console.log("componentType",e);for(var i=0;i<n.treeUnitDSLArray.length;i++){var r=n.treeUnitDSLArray[i];if(r.name===n.treeUnitDSLName){var o=r.dslObj;"Root"===e||"Subtree"===e?(delete o.Layout.X[e],delete o.Layout.Y[e]):"Node"===e||"Link"===e?(delete o.Element[e],delete o.Element[e]):"CoordinateSystem"===e&&delete o[e]}}n.treeUnitDSLArray=JSON.parse(p()(n.treeUnitDSLArray)),a("UPDATE_TREE_UNIT_LAYOUT_STATE")}}}),Qn=a("5c96"),qn=a.n(Qn),ti=(a("0fae"),a("a7fe")),ei=a.n(ti),ai=a("5698"),ni=a("1157");a("a342");n["default"].use(qn.a),window.baseURL="",Rn.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:""}).API_ROOT,window.baseURL="http://vis.pku.edu.cn/gotree_server",n["default"].use(ei.a,Rn.a),n["default"].config.productionTip=!1,window.d3=ai,window.$=ni,window.exports={},new n["default"]({store:Zn,render:function(t){return t(Cn)}}).$mount("#app")},"5eb9":function(t,e,a){},"62b4":function(t,e,a){"use strict";var n=a("5010"),i=a.n(n);i.a},"62c0":function(t,e,a){"use strict";var n=a("45b2"),i=a.n(n);i.a},6526:function(t,e,a){"use strict";var n=a("f006"),i=a.n(n);i.a},6535:function(t,e,a){},"6aea":function(t,e,a){"use strict";var n=a("24b6"),i=a.n(n);i.a},"6cda":function(t,e,a){"use strict";var n=a("b42f"),i=a.n(n);i.a},"6ff7":function(t,e,a){},"71b3":function(t,e,a){"use strict";var n=a("f346"),i=a.n(n);i.a},"71b4":function(t,e,a){"use strict";var n=a("1d5a"),i=a.n(n);i.a},"72d2":function(t,e,a){"use strict";var n=a("bd71"),i=a.n(n);i.a},"735c":function(t,e,a){"use strict";var n=a("52ef"),i=a.n(n);i.a},"79df":function(t,e,a){},"79ff":function(t,e,a){},"7c55":function(t,e,a){"use strict";var n=a("2464"),i=a.n(n);i.a},"853b":function(t,e,a){},8663:function(t,e,a){},"89e5":function(t,e,a){"use strict";var n=a("55a2"),i=a.n(n);i.a},"8a8c":function(t,e,a){"use strict";var n=a("103b"),i=a.n(n);i.a},"8fe2":function(t,e,a){"use strict";var n=a("ee88"),i=a.n(n);i.a},9023:function(t,e,a){},"935f":function(t,e,a){},"93b2":function(t,e,a){"use strict";var n=a("55bb"),i=a.n(n);i.a},9509:function(t,e,a){"use strict";var n=a("f1d7"),i=a.n(n);i.a},"9ec3":function(t,e,a){},a165:function(t,e,a){"use strict";var n=a("23a7"),i=a.n(n);i.a},a342:function(t,e,a){},a660:function(t,e,a){"use strict";var n=a("0006"),i=a.n(n);i.a},a70f:function(t,e,a){"use strict";var n=a("c415"),i=a.n(n);i.a},a719:function(t,e,a){"use strict";var n=a("5eb9"),i=a.n(n);i.a},a7c3:function(t,e,a){"use strict";var n=a("bdba"),i=a.n(n);i.a},acdc:function(t,e,a){"use strict";var n=a("358d"),i=a.n(n);i.a},b42f:function(t,e,a){},bd71:function(t,e,a){},bdba:function(t,e,a){},c0ae:function(t,e,a){"use strict";var n=a("0017"),i=a.n(n);i.a},c18b:function(t,e,a){"use strict";var n=a("0894"),i=a.n(n);i.a},c32b:function(t,e,a){},c383:function(t,e,a){},c415:function(t,e,a){},c8de:function(t,e,a){},cd36:function(t,e,a){"use strict";var n=a("2766"),i=a.n(n);i.a},cd57:function(t,e,a){"use strict";var n=a("853b"),i=a.n(n);i.a},d138:function(t,e,a){"use strict";var n=a("20d0"),i=a.n(n);i.a},d686:function(t,e,a){},d701:function(t,e,a){"use strict";var n=a("c383"),i=a.n(n);i.a},e289:function(t,e,a){"use strict";var n=a("f6d9"),i=a.n(n);i.a},e634:function(t,e,a){},e7d6:function(t,e,a){"use strict";var n=a("f32f"),i=a.n(n);i.a},ee88:function(t,e,a){},f006:function(t,e,a){},f1d7:function(t,e,a){},f32f:function(t,e,a){},f346:function(t,e,a){},f665:function(t,e,a){"use strict";var n=a("d686"),i=a.n(n);i.a},f6d9:function(t,e,a){},f7d4:function(t,e,a){"use strict";var n=a("f9ad"),i=a.n(n);i.a},f9ad:function(t,e,a){},ff03:function(t,e,a){"use strict";var n=a("4593"),i=a.n(n);i.a}});